<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alkali Adventures - Learning Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* All existing styles remain the same */
        :root {
            --primary: #4a6fa5;
            --secondary: #6c63ff;
            --accent: #ff6584;
            --light: #f8f9fa;
            --dark: #343a40;
            --success: #28a745;
            --warning: #ffc107;
            --info: #17a2b8;
            --sidebar-width: 250px;
            --header-height: 70px;
        }
        
        /* All existing CSS rules remain unchanged */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7ff;
            color: var(--dark);
            line-height: 1.6;
            overflow-x: hidden;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        /* Dark Mode */
        body.dark-mode {
            background-color: #1a1a2e;
            color: #eee;
        }
        
        body.dark-mode .header,
        body.dark-mode .sidebar,
        body.dark-mode .card {
            background-color: #16213e;
            color: #eee;
        }
        
        body.dark-mode .card-header {
            border-bottom-color: #0f3460;
        }
        
        body.dark-mode .progress-bar {
            background-color: #0f3460;
        }
        
        body.dark-mode .feed-item,
        body.dark-mode .element-card,
        body.dark-mode .lab-equipment {
            background-color: #0f3460;
        }
        
        body.dark-mode .tabs {
            border-bottom-color: #0f3460;
        }
        
        body.dark-mode .tab {
            color: #bbb;
        }
        
        body.dark-mode .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        
        /* High Contrast Mode */
        body.high-contrast {
            background-color: #000;
            color: #fff;
        }
        
        body.high-contrast .header,
        body.high-contrast .sidebar,
        body.high-contrast .card {
            background-color: #000;
            color: #fff;
            border: 2px solid #fff;
        }
        
        body.high-contrast .btn {
            background-color: #000;
            color: #fff;
            border: 2px solid #fff;
        }
        
        body.high-contrast .progress {
            background-color: #fff;
        }
        
        /* Font Sizes */
        body.font-small {
            font-size: 14px;
        }
        
        body.font-medium {
            font-size: 16px;
        }
        
        body.font-large {
            font-size: 20px;
        }
        
        /* Header Styles */
        .header {
            background: white;
            height: var(--header-height);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            display: flex;
            align-items: center;
            padding: 0 20px;
            transition: background-color 0.3s ease;
        }
        
        .logo {
            display: flex;
            align-items: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
        }
        
        .logo i {
            margin-right: 10px;
            color: var(--accent);
        }
        
        .header-right {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .search-bar {
            position: relative;
            width: 300px;
        }
        
        .search-bar input {
            width: 100%;
            padding: 10px 40px 10px 15px;
            border: 1px solid #ddd;
            border-radius: 50px;
            outline: none;
            transition: all 0.3s ease;
        }
        
        .search-bar input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.1);
        }
        
        .search-bar i {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #999;
        }
        
        .notification-icon {
            position: relative;
            font-size: 1.2rem;
            color: var(--dark);
            cursor: pointer;
        }
        
        .notification-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--accent);
            color: white;
            font-size: 0.7rem;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .user-points {
            margin-right: 15px;
            font-weight: 600;
        }
        
        .user-level {
            margin-right: 15px;
            font-weight: 600;
        }
        
        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .user-name {
            font-weight: 600;
        }
        
        /* Sidebar Styles */
        .sidebar {
            position: fixed;
            top: var(--header-height);
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - var(--header-height));
            background: white;
            box-shadow: 2px 0 10px rgba(0,0,0,0.05);
            overflow-y: auto;
            z-index: 999;
            transition: transform 0.3s ease, background-color 0.3s ease;
        }
        
        .sidebar-menu {
            padding: 20px 0;
        }
        
        .menu-item {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            color: var(--dark);
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }
        
        .menu-item:hover {
            background: rgba(74, 111, 165, 0.05);
            border-left-color: var(--primary);
        }
        
        .menu-item.active {
            background: rgba(74, 111, 165, 0.1);
            border-left-color: var(--primary);
            color: var(--primary);
            font-weight: 600;
        }
        
        .menu-item i {
            margin-right: 15px;
            font-size: 1.2rem;
            width: 20px;
            text-align: center;
        }
        
        .menu-badge {
            margin-left: auto;
            background: var(--accent);
            color: white;
            font-size: 0.7rem;
            padding: 2px 8px;
            border-radius: 20px;
        }
        
        /* Main Content */
        .main-content {
            margin-left: var(--sidebar-width);
            margin-top: var(--header-height);
            padding: 30px;
            min-height: calc(100vh - var(--header-height));
            transition: margin-left 0.3s ease;
        }
        
        .page-header {
            margin-bottom: 30px;
        }
        
        .page-title {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .page-subtitle {
            color: #666;
        }
        
        /* Dashboard Cards */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .card-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary);
        }
        
        .card-icon {
            font-size: 1.5rem;
            color: var(--secondary);
        }
        
        .card-body {
            padding: 20px;
        }
        
        /* Stats Card */
        .stats-card {
            display: flex;
            align-items: center;
            padding: 20px;
        }
        
        .stats-icon {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            margin-right: 20px;
        }
        
        .stats-icon.primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }
        
        .stats-icon.success {
            background: linear-gradient(135deg, var(--success), #20c997);
        }
        
        .stats-icon.warning {
            background: linear-gradient(135deg, var(--warning), #fd7e14);
        }
        
        .stats-icon.info {
            background: linear-gradient(135deg, var(--info), #6f42c1);
        }
        
        .stats-info h3 {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }
        
        .stats-info p {
            color: #666;
            font-size: 0.9rem;
        }
        
        /* Progress Card */
        .progress-item {
            margin-bottom: 20px;
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .progress-title {
            font-weight: 600;
        }
        
        .progress-value {
            color: var(--primary);
            font-weight: 600;
        }
        
        .progress-bar {
            height: 10px;
            background: #eee;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            border-radius: 5px;
            transition: width 1s ease;
        }
        
        .progress.primary {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }
        
        .progress.success {
            background: linear-gradient(90deg, var(--success), #20c997);
        }
        
        .progress.warning {
            background: linear-gradient(90deg, var(--warning), #fd7e14);
        }
        
        /* Periodic Table */
        .periodic-table {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .element-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
        }
        
        .element-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .element-card.selected {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(74, 111, 165, 0.1), rgba(108, 99, 255, 0.1));
        }
        
        .element-symbol {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
        }
        
        .element-name {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }
        
        .element-number {
            font-size: 0.8rem;
            color: #999;
            position: absolute;
            top: 5px;
            left: 10px;
        }
        
        /* Virtual Lab */
        .lab-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .lab-equipment {
            flex: 1;
            min-width: 200px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .lab-equipment:hover {
            background: rgba(74, 111, 165, 0.1);
        }
        
        .lab-equipment i {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .lab-equipment.selected {
            background: rgba(74, 111, 165, 0.2);
            border: 2px solid var(--primary);
        }
        
        .reaction-area {
            margin-top: 20px;
            min-height: 200px;
            background: #f8f9fa;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            text-align: center;
        }
        
        /* Social Feed */
        .social-feed {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .feed-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: flex-start;
        }
        
        .feed-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 15px;
            object-fit: cover;
        }
        
        .feed-content {
            flex: 1;
        }
        
        .feed-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .feed-author {
            font-weight: 600;
        }
        
        .feed-time {
            color: #999;
            font-size: 0.8rem;
        }
        
        .feed-text {
            margin-bottom: 10px;
        }
        
        .feed-actions {
            display: flex;
            gap: 15px;
        }
        
        .feed-action {
            color: #666;
            font-size: 0.9rem;
            cursor: pointer;
        }
        
        .feed-action:hover {
            color: var(--primary);
        }
        
        /* Gamification */
        .badge-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .badge {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }
        
        .badge.earned {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            box-shadow: 0 5px 15px rgba(108, 99, 255, 0.3);
        }
        
        .badge.locked {
            background: #f8f9fa;
            color: #ccc;
            border: 2px dashed #ddd;
        }
        
        .badge i {
            font-size: 2rem;
            margin-bottom: 5px;
        }
        
        .badge-name {
            font-size: 0.7rem;
            text-align: center;
        }
        
        .badge-tooltip {
            position: absolute;
            bottom: 110%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--dark);
            color: white;
            padding: 8px 12px;
            border-radius: 5px;
            font-size: 0.8rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        .badge:hover .badge-tooltip {
            opacity: 1;
        }
        
        /* Quests */
        .quest-list {
            margin-top: 20px;
        }
        
        .quest-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .quest-item:hover {
            background: rgba(74, 111, 165, 0.05);
        }
        
        .quest-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            margin-right: 15px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }
        
        .quest-content {
            flex: 1;
        }
        
        .quest-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .quest-description {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        
        .quest-progress {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .quest-progress-bar {
            flex: 1;
            height: 8px;
            background: #ddd;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .quest-progress-value {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }
        
        .quest-reward {
            background: var(--warning);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            font-weight: 600;
            color: #666;
            transition: all 0.3s ease;
        }
        
        .tab:hover {
            color: var(--primary);
        }
        
        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Buttons */
        .btn {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .btn:hover {
            background: #3a5a80;
            transform: translateY(-2px);
        }
        
        .btn-sm {
            padding: 5px 12px;
            font-size: 0.8rem;
        }
        
        .btn-outline {
            background: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }
        
        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }
        
        .btn-success {
            background: var(--success);
        }
        
        .btn-success:hover {
            background: #218838;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            width: 90%;
            max-width: 600px;
            border-radius: 15px;
            overflow: hidden;
            animation: fadeIn 0.3s ease;
        }
        
        .modal-header {
            background: var(--primary);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .modal-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .modal-body {
            padding: 20px;
        }
        
        /* Notifications */
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            background: white;
            border-radius: 10px;
            padding: 15px 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            z-index: 1001;
            display: flex;
            align-items: center;
            gap: 15px;
            max-width: 300px;
            animation: slideIn 0.3s ease;
        }
        
        .notification.level-up {
            border-left: 4px solid var(--success);
        }
        
        .notification.achievement {
            border-left: 4px solid var(--warning);
        }
        
        .notification-content {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .notification i {
            font-size: 1.5rem;
        }
        
        .notification.level-up i {
            color: var(--success);
        }
        
        .notification.achievement i {
            color: var(--warning);
        }
        
        .notification-title {
            font-weight: 600;
            margin-bottom: 3px;
        }
        
        /* Accessibility Controls */
        .accessibility-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            border-radius: 50px;
            padding: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            display: flex;
            gap: 10px;
            z-index: 1000;
        }
        
        /* Voice Control */
        .voice-control-btn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            border: none;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            cursor: pointer;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: background-color 0.3s ease;
        }
        
        .voice-control-btn:hover {
            background: #3a5a80;
        }
        
        .voice-control-btn.listening {
            background: var(--accent);
            animation: pulse 1.5s infinite;
        }
        
        .voice-listening-indicator {
            position: fixed;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--accent);
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            z-index: 1001;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: fadeIn 0.3s ease;
        }
        
        /* 3D Model Container */
        #atom-3d {
            height: 400px;
            position: relative;
            background: #f8f9fa;
            border-radius: 10px;
            overflow: hidden;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .menu-toggle {
                display: block;
                margin-right: 20px;
                font-size: 1.5rem;
                cursor: pointer;
            }
            
            .search-bar {
                width: 200px;
            }
        }
        
        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .header-right {
                gap: 10px;
            }
            
            .search-bar {
                display: none;
            }
            
            .user-points,
            .user-level {
                display: none;
            }
        }
        
        .menu-toggle {
            display: none;
        }
        
        /* Screen reader only content */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
        
        /* Focus indicators */
        button:focus,
        a:focus,
        input:focus,
        select:focus,
        textarea:focus {
            outline: 3px solid #ff6584;
            outline-offset: 2px;
        }
        
        /* Recommendation Card */
        .recommendation {
            background: rgba(108, 99, 255, 0.1);
            border-left: 4px solid var(--secondary);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .recommendation-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .recommendation-type {
            background: var(--secondary);
            color: white;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .recommendation-topic {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .recommendation-reason {
            color: #666;
            margin-bottom: 15px;
        }
        
        /* Chat Interface */
        .chat-container {
            margin-top: 20px;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }
        
        .chat-messages {
            height: 200px;
            overflow-y: auto;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .chat-message {
            margin-bottom: 15px;
        }
        
        .chat-message:last-child {
            margin-bottom: 0;
        }
        
        .message-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .message-user {
            font-weight: 600;
            color: var(--primary);
        }
        
        .message-time {
            color: #999;
            font-size: 0.8rem;
        }
        
        .message-content {
            background: white;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .chat-input {
            display: flex;
            gap: 10px;
        }
        
        .chat-input input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            outline: none;
        }
        
        .chat-input input:focus {
            border-color: var(--primary);
        }
        
        /* Offline/Online Status */
        .online-status,
        .offline-status {
            position: fixed;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            padding: 10px 20px;
            border-radius: 5px;
            color: white;
            z-index: 1001;
            animation: fadeIn 0.3s ease;
        }
        
        .online-status {
            background: var(--success);
        }
        
        .offline-status {
            background: var(--warning);
        }
        
        /* Quiz Styles */
        .quiz-container {
            margin-top: 20px;
        }
        
        .quiz-question {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .quiz-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }
        
        .quiz-option {
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .quiz-option:hover {
            border-color: var(--primary);
        }
        
        .quiz-option.selected {
            border-color: var(--primary);
            background: rgba(74, 111, 165, 0.1);
        }
        
        .quiz-option.correct {
            border-color: var(--success);
            background: rgba(40, 167, 69, 0.1);
        }
        
        .quiz-option.incorrect {
            border-color: var(--accent);
            background: rgba(255, 101, 132, 0.1);
        }
        
        .quiz-feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 10px;
            display: none;
        }
        
        .quiz-feedback.correct {
            background: rgba(40, 167, 69, 0.1);
            color: var(--success);
            border-left: 4px solid var(--success);
        }
        
        .quiz-feedback.incorrect {
            background: rgba(255, 101, 132, 0.1);
            color: var(--accent);
            border-left: 4px solid var(--accent);
        }
        
        .quiz-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        .quiz-results {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            display: none;
        }
        
        .quiz-score {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary);
            margin: 20px 0;
        }
        
        /* Spaced Repetition Card */
        .spaced-repetition {
            margin-top: 20px;
        }
        
        .review-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
        }
        
        .review-question {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .review-answer {
            display: none;
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }
        
        .review-rating {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }
        
        .rating-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 2px solid #ddd;
            background: white;
            color: #666;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .rating-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }
        
        .rating-btn.selected {
            border-color: var(--primary);
            background: var(--primary);
            color: white;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="menu-toggle" id="menu-toggle">
            <i class="fas fa-bars"></i>
        </div>
        <div class="logo">
            <i class="fas fa-atom"></i>
            <span>Alkali Adventures</span>
        </div>
        <div class="header-right">
            <div class="search-bar">
                <input type="text" placeholder="Search lessons, elements, topics..." aria-label="Search">
                <i class="fas fa-search"></i>
            </div>
            <div class="notification-icon" aria-label="Notifications">
                <i class="fas fa-bell"></i>
                <span class="notification-badge">3</span>
            </div>
            <div class="user-points" aria-label="Chemistry Points">
                <i class="fas fa-coins"></i> <span id="user-points-display">1,250</span> CP
            </div>
            <div class="user-level" aria-label="User Level">
                Level <span id="user-level-display">4</span>
            </div>
            <div class="user-profile">
                <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="User Avatar" class="user-avatar">
                <span class="user-name">Alex Johnson</span>
                <i class="fas fa-chevron-down"></i>
            </div>
        </div>
    </header>
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-menu">
            <a href="#" class="menu-item active" data-page="dashboard" aria-label="Dashboard">
                <i class="fas fa-home"></i>
                <span>Dashboard</span>
            </a>
            <a href="#" class="menu-item" data-page="learning" aria-label="Learning Hub">
                <i class="fas fa-book-open"></i>
                <span>Learning Hub</span>
            </a>
            <a href="#" class="menu-item" data-page="lab" aria-label="Virtual Lab">
                <i class="fas fa-flask"></i>
                <span>Virtual Lab</span>
            </a>
            <a href="#" class="menu-item" data-page="social" aria-label="Social Learning">
                <i class="fas fa-users"></i>
                <span>Social Learning</span>
                <span class="menu-badge">5</span>
            </a>
            <a href="#" class="menu-item" data-page="gamification" aria-label="Gamification">
                <i class="fas fa-trophy"></i>
                <span>Gamification</span>
            </a>
            <a href="#" class="menu-item" data-page="progress" aria-label="Progress">
                <i class="fas fa-chart-line"></i>
                <span>Progress</span>
            </a>
            <a href="#" class="menu-item" data-page="quiz" aria-label="Quiz">
                <i class="fas fa-question-circle"></i>
                <span>Quiz</span>
            </a>
            <a href="#" class="menu-item" data-page="spaced" aria-label="Spaced Repetition">
                <i class="fas fa-redo"></i>
                <span>Spaced Repetition</span>
            </a>
            <a href="#" class="menu-item" data-page="resources" aria-label="Resources">
                <i class="fas fa-folder"></i>
                <span>Resources</span>
            </a>
            <a href="#" class="menu-item" data-page="settings" aria-label="Settings">
                <i class="fas fa-cog"></i>
                <span>Settings</span>
            </a>
        </div>
    </aside>
    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard Page -->
        <div id="dashboard-page" class="page active">
            <div class="page-header">
                <h1 class="page-title">Learning Dashboard</h1>
                <p class="page-subtitle">Welcome back, Alex! Continue your journey through Group 1 metals.</p>
            </div>
            
            <!-- Stats Cards -->
            <div class="dashboard-grid">
                <div class="card stats-card">
                    <div class="stats-icon primary">
                        <i class="fas fa-fire"></i>
                    </div>
                    <div class="stats-info">
                        <h3>12</h3>
                        <p>Learning Streak</p>
                    </div>
                </div>
                
                <div class="card stats-card">
                    <div class="stats-icon success">
                        <i class="fas fa-coins"></i>
                    </div>
                    <div class="stats-info">
                        <h3>1,250</h3>
                        <p>Chemistry Points</p>
                    </div>
                </div>
                
                <div class="card stats-card">
                    <div class="stats-icon warning">
                        <i class="fas fa-medal"></i>
                    </div>
                    <div class="stats-info">
                        <h3>6</h3>
                        <p>Badges Earned</p>
                    </div>
                </div>
                
                <div class="card stats-card">
                    <div class="stats-icon info">
                        <i class="fas fa-percentage"></i>
                    </div>
                    <div class="stats-info">
                        <h3>68%</h3>
                        <p>Course Progress</p>
                    </div>
                </div>
            </div>
            
            <!-- Progress Overview -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Module Progress</h3>
                    <i class="fas fa-chart-line card-icon"></i>
                </div>
                <div class="card-body">
                    <div class="progress-item">
                        <div class="progress-header">
                            <span class="progress-title">Group 1 Metals Overview</span>
                            <span class="progress-value">85%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress primary" style="width: 85%;"></div>
                        </div>
                    </div>
                    
                    <div class="progress-item">
                        <div class="progress-header">
                            <span class="progress-title">Physical Properties</span>
                            <span class="progress-value">70%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress primary" style="width: 70%;"></div>
                        </div>
                    </div>
                    
                    <div class="progress-item">
                        <div class="progress-header">
                            <span class="progress-title">Chemical Reactions</span>
                            <span class="progress-value">60%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress primary" style="width: 60%;"></div>
                        </div>
                    </div>
                    
                    <div class="progress-item">
                        <div class="progress-header">
                            <span class="progress-title">Practical Applications</span>
                            <span class="progress-value">45%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress warning" style="width: 45%;"></div>
                        </div>
                    </div>
                    
                    <div class="progress-item">
                        <div class="progress-header">
                            <span class="progress-title">Exam Preparation</span>
                            <span class="progress-value">55%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress success" style="width: 55%;"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Recent Activity -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Recent Activity</h3>
                    <i class="fas fa-history card-icon"></i>
                </div>
                <div class="card-body">
                    <div class="social-feed">
                        <div class="feed-item">
                            <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="User" class="feed-avatar">
                            <div class="feed-content">
                                <div class="feed-header">
                                    <span class="feed-author">You</span>
                                    <span class="feed-time">2 hours ago</span>
                                </div>
                                <div class="feed-text">Completed the "Sodium Reactions" experiment in the Virtual Lab.</div>
                                <div class="feed-actions">
                                    <span class="feed-action"><i class="fas fa-heart"></i> 12</span>
                                    <span class="feed-action"><i class="fas fa-comment"></i> 3</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="feed-item">
                            <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="User" class="feed-avatar">
                            <div class="feed-content">
                                <div class="feed-header">
                                    <span class="feed-author">Sarah Miller</span>
                                    <span class="feed-time">5 hours ago</span>
                                </div>
                                <div class="feed-text">Earned the "Reactivity Master" badge! Who's next?</div>
                                <div class="feed-actions">
                                    <span class="feed-action"><i class="fas fa-heart"></i> 24</span>
                                    <span class="feed-action"><i class="fas fa-comment"></i> 8</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="feed-item">
                            <img src="https://randomuser.me/api/portraits/men/67.jpg" alt="User" class="feed-avatar">
                            <div class="feed-content">
                                <div class="feed-header">
                                    <span class="feed-author">Michael Chen</span>
                                    <span class="feed-time">1 day ago</span>
                                </div>
                                <div class="feed-text">Started a new study group "Advanced Alkali Metals". Join us to discuss complex reactions!</div>
                                <div class="feed-actions">
                                    <span class="feed-action"><i class="fas fa-heart"></i> 18</span>
                                    <span class="feed-action"><i class="fas fa-comment"></i> 5</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Recommendation Card -->
            <div class="recommendation" id="recommendation-card" style="display: none;">
                <div class="recommendation-header">
                    <h4>Recommended Next Step</h4>
                    <span class="recommendation-type" id="recommendation-type">Standard</span>
                </div>
                <div class="recommendation-topic" id="recommendation-topic">Next Module</div>
                <div class="recommendation-reason" id="recommendation-reason">Continue with your learning journey</div>
                <button class="btn" id="start-recommended">Start Now</button>
            </div>
        </div>
        <!-- Learning Hub Page -->
        <div id="learning-page" class="page" style="display: none;">
            <div class="page-header">
                <h1 class="page-title">Learning Hub</h1>
                <p class="page-subtitle">Explore interactive lessons about Group 1 metals</p>
            </div>
            
            <div class="tabs">
                <div class="tab active" data-tab="elements">Elements</div>
                <div class="tab" data-tab="properties">Properties</div>
                <div class="tab" data-tab="reactions">Reactions</div>
                <div class="tab" data-tab="applications">Applications</div>
                <div class="tab" data-tab="safety">Safety</div>
            </div>
            
            <div class="tab-content active" id="elements">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Group 1 Elements</h3>
                        <i class="fas fa-atom card-icon"></i>
                    </div>
                    <div class="card-body">
                        <p>Group 1 metals are called alkali metals. They are located in the first column of the periodic table and are very reactive metals, never found free in nature. Reactivity increases down the group.</p>
                        
                        <div class="periodic-table">
                            <div class="element-card" data-element="Li">
                                <div class="element-number">3</div>
                                <div class="element-symbol">Li</div>
                                <div class="element-name">Lithium</div>
                            </div>
                            <div class="element-card" data-element="Na">
                                <div class="element-number">11</div>
                                <div class="element-symbol">Na</div>
                                <div class="element-name">Sodium</div>
                            </div>
                            <div class="element-card" data-element="K">
                                <div class="element-number">19</div>
                                <div class="element-symbol">K</div>
                                <div class="element-name">Potassium</div>
                            </div>
                            <div class="element-card" data-element="Rb">
                                <div class="element-number">37</div>
                                <div class="element-symbol">Rb</div>
                                <div class="element-name">Rubidium</div>
                            </div>
                            <div class="element-card" data-element="Cs">
                                <div class="element-number">55</div>
                                <div class="element-symbol">Cs</div>
                                <div class="element-name">Cesium</div>
                            </div>
                            <div class="element-card" data-element="Fr">
                                <div class="element-number">87</div>
                                <div class="element-symbol">Fr</div>
                                <div class="element-name">Francium</div>
                            </div>
                        </div>
                        
                        <div id="element-details" style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px; display: none;">
                            <h3 id="element-title">Element Details</h3>
                            <div id="element-info">
                                <!-- Element details will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 3D Model Section -->
                <div class="card" style="margin-top: 30px;">
                    <div class="card-header">
                        <h3 class="card-title">3D Atomic Model</h3>
                        <i class="fas fa-cube card-icon"></i>
                    </div>
                    <div class="card-body">
                        <p>Explore the atomic structure of Group 1 elements in 3D.</p>
                        
                        <div id="atom-3d">
                            <div style="display: flex; align-items: center; justify-content: center; height: 100%; flex-direction: column;">
                                <i class="fas fa-cube" style="font-size: 4rem; color: var(--primary); margin-bottom: 20px;"></i>
                                <p>3D Model Viewer</p>
                                <p style="color: #666; margin-top: 10px;">Select an element above to view its 3D structure</p>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin-top: 15px;">
                            <select id="element-select" class="btn btn-outline">
                                <option value="">Select an element</option>
                                <option value="Li">Lithium</option>
                                <option value="Na">Sodium</option>
                                <option value="K">Potassium</option>
                                <option value="Rb">Rubidium</option>
                                <option value="Cs">Cesium</option>
                                <option value="Fr">Francium</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="properties">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Physical Properties</h3>
                        <i class="fas fa-ruler card-icon"></i>
                    </div>
                    <div class="card-body">
                        <p>Group 1 elements share common physical properties that change predictably down the group.</p>
                        
                        <div style="margin-top: 20px;">
                            <h4>General Characteristics</h4>
                            <ul>
                                <li>Soft, can be cut with a knife (Li, Na, K)</li>
                                <li>Low density; some float on water</li>
                                <li>Shiny when freshly cut but tarnishes quickly in air</li>
                                <li>Low melting and boiling points, decreasing down the group</li>
                            </ul>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <h4>Atomic Radius</h4>
                            <p>Atomic radius increases down the group due to additional electron shells.</p>
                            <div class="progress-bar" style="height: 20px; margin-top: 10px;">
                                <div class="progress primary" style="width: 100%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
                                    Li < Na < K < Rb < Cs < Fr
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <h4>Density</h4>
                            <p>Density generally increases down the group, with some exceptions.</p>
                            <div class="progress-bar" style="height: 20px; margin-top: 10px;">
                                <div class="progress primary" style="width: 100%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
                                    Li < Na < K < Rb < Cs
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <h4>Melting and Boiling Points</h4>
                            <p>Melting and boiling points decrease down the group due to weaker metallic bonding.</p>
                            <div class="progress-bar" style="height: 20px; margin-top: 10px;">
                                <div class="progress primary" style="width: 100%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
                                    Li > Na > K > Rb > Cs
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card" style="margin-top: 30px;">
                    <div class="card-header">
                        <h3 class="card-title">Chemical Properties</h3>
                        <i class="fas fa-flask card-icon"></i>
                    </div>
                    <div class="card-body">
                        <p>Group 1 metals are highly reactive and undergo characteristic reactions.</p>
                        
                        <div style="margin-top: 20px;">
                            <h4>General Reactivity</h4>
                            <ul>
                                <li>Very reactive metals; never found free in nature</li>
                                <li>Reactivity increases down the group</li>
                                <li>Form +1 ions and alkaline hydroxides when reacting with water</li>
                            </ul>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <h4>Reaction with Water</h4>
                            <p>All Group 1 metals react with water to produce hydrogen gas and metal hydroxides.</p>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-top: 10px;">
                                <code>2M(s) + 2H₂O(l) → 2MOH(aq) + H₂(g)</code>
                            </div>
                            <p style="margin-top: 10px;">Reactivity increases down the group: Lithium reacts steadily, while cesium reacts explosively.</p>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <h4>Reaction with Oxygen</h4>
                            <p>Group 1 metals react with oxygen to form oxides, peroxides, or superoxides.</p>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-top: 10px;">
                                <code>4M(s) + O₂(g) → 2M₂O(s)</code>
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <h4>Reaction with Halogens</h4>
                            <p>Group 1 metals react vigorously with halogens to form ionic salts.</p>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-top: 10px;">
                                <code>2M(s) + X₂(g) → 2MX(s)</code>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="reactions">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Chemical Reactions</h3>
                        <i class="fas fa-flask card-icon"></i>
                    </div>
                    <div class="card-body">
                        <p>Group 1 metals are highly reactive and undergo characteristic reactions.</p>
                        
                        <div style="margin-top: 20px;">
                            <h4>Reaction with Water</h4>
                            <p>All Group 1 metals react with water to produce hydrogen gas and metal hydroxides.</p>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-top: 10px;">
                                <code>2M(s) + 2H₂O(l) → 2MOH(aq) + H₂(g)</code>
                            </div>
                            <p style="margin-top: 10px;">Reactivity increases down the group: Lithium reacts steadily, while cesium reacts explosively.</p>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <h4>Reaction with Oxygen</h4>
                            <p>Group 1 metals react with oxygen to form oxides, peroxides, or superoxides.</p>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-top: 10px;">
                                <code>4M(s) + O₂(g) → 2M₂O(s)</code>
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <h4>Reaction with Halogens</h4>
                            <p>Group 1 metals react vigorously with halogens to form ionic salts.</p>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-top: 10px;">
                                <code>2M(s) + X₂(g) → 2MX(s)</code>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="applications">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Real-World Applications</h3>
                        <i class="fas fa-industry card-icon"></i>
                    </div>
                    <div class="card-body">
                        <p>Group 1 metals have numerous important applications in technology and industry.</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                                <h4>Lithium</h4>
                                <ul style="padding-left: 20px; margin-top: 10px;">
                                    <li>Batteries (lithium-ion)</li>
                                    <li>Mood-stabilizing drugs</li>
                                    <li>Alloy production</li>
                                    <li>Grease thickener</li>
                                </ul>
                            </div>
                            
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                                <h4>Sodium</h4>
                                <ul style="padding-left: 20px; margin-top: 10px;">
                                    <li>Street lighting (sodium vapor lamps)</li>
                                    <li>Table salt (NaCl)</li>
                                    <li>Chemical production</li>
                                    <li>Nuclear reactor coolant</li>
                                </ul>
                            </div>
                            
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                                <h4>Potassium</h4>
                                <ul style="padding-left: 20px; margin-top: 10px;">
                                    <li>Fertilizers (KCl, K₂SO₄)</li>
                                    <li>Soap production</li>
                                    <li>Glass manufacturing</li>
                                    <li>Essential nutrient</li>
                                </ul>
                            </div>
                            
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                                <h4>Rubidium</h4>
                                <ul style="padding-left: 20px; margin-top: 10px;">
                                    <li>Research and electronics</li>
                                    <li>Specialty glasses</li>
                                    <li>Vacuum tubes</li>
                                    <li>Atomic clocks</li>
                                </ul>
                            </div>
                            
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                                <h4>Cesium</h4>
                                <ul style="padding-left: 20px; margin-top: 10px;">
                                    <li>Atomic clocks</li>
                                    <li>Photoelectric cells</li>
                                    <li>Drilling fluids</li>
                                    <li>Vacuum tubes</li>
                                </ul>
                            </div>
                            
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                                <h4>Francium</h4>
                                <ul style="padding-left: 20px; margin-top: 10px;">
                                    <li>Extremely rare and radioactive</li>
                                    <li>No widespread practical uses due to radioactivity</li>
                                    <li>Research purposes only</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="safety">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Safety Considerations</h3>
                        <i class="fas fa-exclamation-triangle card-icon"></i>
                    </div>
                    <div class="card-body">
                        <p>Group 1 metals are highly reactive and require special safety precautions.</p>
                        
                        <div style="margin-top: 20px;">
                            <h4>General Safety</h4>
                            <ul>
                                <li>Highly reactive, especially with water and air</li>
                                <li>Store under oil to prevent reactions</li>
                                <li>Handle small amounts only in controlled labs</li>
                                <li>Always wear appropriate personal protective equipment (PPE)</li>
                            </ul>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <h4>Reaction with Water</h4>
                            <p>Reactions with water can be vigorous and produce hydrogen gas, which is flammable.</p>
                            <ul>
                                <li>Lithium: Reacts steadily, can be handled with care</li>
                                <li>Sodium: Reacts vigorously, may ignite hydrogen</li>
                                <li>Potassium: Reacts violently, ignites hydrogen</li>
                                <li>Rubidium and Cesium: React explosively</li>
                            </ul>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <h4>Storage</h4>
                            <ul>
                                <li>Store under mineral oil or kerosene</li>
                                <li>Keep in a cool, dry place</li>
                                <li>Isolate from water and air</li>
                                <li>Use appropriate containers (e.g., glass or metal)</li>
                            </ul>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <h4>Emergency Procedures</h4>
                            <ul>
                                <li>For small fires: Use a Class D fire extinguisher</li>
                                <li>Do not use water or CO₂ extinguishers</li>
                                <li>In case of skin contact: Rinse with plenty of water and seek medical attention</li>
                                <li>In case of eye contact: Rinse with water for at least 15 minutes and seek medical attention</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Virtual Lab Page -->
        <div id="lab-page" class="page" style="display: none;">
            <div class="page-header">
                <h1 class="page-title">Virtual Laboratory</h1>
                <p class="page-subtitle">Safely experiment with Group 1 metals in our virtual environment</p>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Lab Equipment</h3>
                    <i class="fas fa-tools card-icon"></i>
                </div>
                <div class="card-body">
                    <p>Select equipment and elements to set up your experiment:</p>
                    
                    <div class="lab-container">
                        <div class="lab-equipment" data-equipment="beaker">
                            <i class="fas fa-vial"></i>
                            <div>Beaker</div>
                        </div>
                        <div class="lab-equipment" data-equipment="water">
                            <i class="fas fa-tint"></i>
                            <div>Water</div>
                        </div>
                        <div class="lab-equipment" data-equipment="acid">
                            <i class="fas fa-flask"></i>
                            <div>Acid</div>
                        </div>
                        <div class="lab-equipment" data-equipment="oxygen">
                            <i class="fas fa-wind"></i>
                            <div>Oxygen</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <h4>Select Element:</h4>
                        <div class="periodic-table">
                            <div class="element-card" data-element="Li">
                                <div class="element-symbol">Li</div>
                                <div class="element-name">Lithium</div>
                            </div>
                            <div class="element-card" data-element="Na">
                                <div class="element-symbol">Na</div>
                                <div class="element-name">Sodium</div>
                            </div>
                            <div class="element-card" data-element="K">
                                <div class="element-symbol">K</div>
                                <div class="element-name">Potassium</div>
                            </div>
                            <div class="element-card" data-element="Rb">
                                <div class="element-symbol">Rb</div>
                                <div class="element-name">Rubidium</div>
                            </div>
                            <div class="element-card" data-element="Cs">
                                <div class="element-symbol">Cs</div>
                                <div class="element-name">Cesium</div>
                            </div>
                            <div class="element-card" data-element="Fr">
                                <div class="element-symbol">Fr</div>
                                <div class="element-name">Francium</div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn" id="start-lab-experiment">Start Experiment</button>
                    </div>
                    
                    <div class="reaction-area" id="lab-reaction-area">
                        <p>Set up your experiment and click "Start Experiment" to begin</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- Social Learning Page -->
        <div id="social-page" class="page" style="display: none;">
            <div class="page-header">
                <h1 class="page-title">Social Learning Center</h1>
                <p class="page-subtitle">Connect, collaborate, and learn with your peers</p>
            </div>
            
            <div class="tabs">
                <div class="tab active" data-tab="feed">Activity Feed</div>
                <div class="tab" data-tab="groups">Study Groups</div>
                <div class="tab" data-tab="questions">Q&A Forum</div>
                <div class="tab" data-tab="teaching">Peer Teaching</div>
            </div>
            
            <div class="tab-content active" id="feed">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Recent Activity</h3>
                        <i class="fas fa-stream card-icon"></i>
                    </div>
                    <div class="card-body">
                        <div class="social-feed">
                            <div class="feed-item">
                                <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="User" class="feed-avatar">
                                <div class="feed-content">
                                    <div class="feed-header">
                                        <span class="feed-author">Sarah Miller</span>
                                        <span class="feed-time">30 minutes ago</span>
                                    </div>
                                    <div class="feed-text">Just completed the "Potassium Reactions" module. The virtual lab experiment was amazing!</div>
                                    <div class="feed-actions">
                                        <span class="feed-action"><i class="fas fa-heart"></i> 15</span>
                                        <span class="feed-action"><i class="fas fa-comment"></i> 4</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="feed-item">
                                <img src="https://randomuser.me/api/portraits/men/67.jpg" alt="User" class="feed-avatar">
                                <div class="feed-content">
                                    <div class="feed-header">
                                        <span class="feed-author">Michael Chen</span>
                                        <span class="feed-time">2 hours ago</span>
                                    </div>
                                    <div class="feed-text">Looking for study partners for the upcoming exam on Group 1 metals. Anyone interested in forming a group?</div>
                                    <div class="feed-actions">
                                        <span class="feed-action"><i class="fas fa-heart"></i> 8</span>
                                        <span class="feed-action"><i class="fas fa-comment"></i> 12</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="feed-item">
                                <img src="https://randomuser.me/api/portraits/women/68.jpg" alt="User" class="feed-avatar">
                                <div class="feed-content">
                                    <div class="feed-header">
                                        <span class="feed-author">Emma Rodriguez</span>
                                        <span class="feed-time">5 hours ago</span>
                                    </div>
                                    <div class="feed-text">Created a new mini-lesson on "Trends in Reactivity of Group 1 Metals". Check it out and let me know what you think!</div>
                                    <div class="feed-actions">
                                        <span class="feed-action"><i class="fas fa-heart"></i> 22</span>
                                        <span class="feed-action"><i class="fas fa-comment"></i> 7</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="feed-item">
                                <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="User" class="feed-avatar">
                                <div class="feed-content">
                                    <div class="feed-header">
                                        <span class="feed-author">You</span>
                                        <span class="feed-time">1 day ago</span>
                                    </div>
                                    <div class="feed-text">Earned the "Atomic Explorer" badge! Only 4 more to go until I reach "Alkali Master" status.</div>
                                    <div class="feed-actions">
                                        <span class="feed-action"><i class="fas fa-heart"></i> 18</span>
                                        <span class="feed-action"><i class="fas fa-comment"></i> 5</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="groups">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Study Groups</h3>
                        <i class="fas fa-users card-icon"></i>
                    </div>
                    <div class="card-body">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;" data-group="group1-basics">
                                <h4>Group 1 Basics</h4>
                                <p style="color: #666; margin: 10px 0;">For beginners learning about alkali metals</p>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                                    <span><i class="fas fa-users"></i> 24 members</span>
                                    <button class="btn btn-sm">Join</button>
                                </div>
                                
                                <div class="chat-container">
                                    <div class="chat-messages" id="chat-group1-basics">
                                        <div class="chat-message">
                                            <div class="message-header">
                                                <span class="message-user">Sarah M.</span>
                                                <span class="message-time">10:30 AM</span>
                                            </div>
                                            <div class="message-content">Welcome to the group! Let's start with the basics of Group 1 metals.</div>
                                        </div>
                                        <div class="chat-message">
                                            <div class="message-header">
                                                <span class="message-user">You</span>
                                                <span class="message-time">10:32 AM</span>
                                            </div>
                                            <div class="message-content">Great! I'm excited to learn more about alkali metals.</div>
                                        </div>
                                    </div>
                                    <div class="chat-input">
                                        <input type="text" id="message-input-group1-basics" placeholder="Type a message...">
                                        <button class="btn btn-sm" onclick="sendChatMessage('group1-basics')">Send</button>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;" data-group="advanced-reactions">
                                <h4>Advanced Reactions</h4>
                                <p style="color: #666; margin: 10px 0;">Exploring complex reactions and mechanisms</p>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                                    <span><i class="fas fa-users"></i> 12 members</span>
                                    <button class="btn btn-sm">Join</button>
                                </div>
                            </div>
                            
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;" data-group="exam-prep">
                                <h4>Exam Preparation</h4>
                                <p style="color: #666; margin: 10px 0;">Focused on test strategies and practice</p>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                                    <span><i class="fas fa-users"></i> 18 members</span>
                                    <button class="btn btn-sm btn-success">Joined</button>
                                </div>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin-top: 30px;">
                            <button class="btn">Create New Group</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="questions">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Q&A Forum</h3>
                        <i class="fas fa-question-circle card-icon"></i>
                    </div>
                    <div class="card-body">
                        <div style="margin-bottom: 20px;">
                            <button class="btn">Ask a Question</button>
                        </div>
                        
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 15px;">
                            <h4>Why does reactivity increase down Group 1?</h4>
                            <p style="color: #666; margin: 10px 0;">I understand that reactivity increases down the group, but I'm not sure why. Can someone explain the atomic structure reasons behind this trend?</p>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                                <div>
                                    <span style="font-weight: 600;">James Wilson</span>
                                    <span style="color: #999; margin-left: 10px;">2 hours ago</span>
                                </div>
                                <div>
                                    <span style="color: #666; margin-right: 15px;"><i class="fas fa-comment"></i> 5 answers</span>
                                    <span style="color: var(--success);"><i class="fas fa-check-circle"></i> Solved</span>
                                </div>
                            </div>
                        </div>
                        
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 15px;">
                            <h4>What are the practical uses of cesium?</h4>
                            <p style="color: #666; margin: 10px 0;">We learned about the properties of cesium, but I'm curious about its real-world applications. Where is cesium actually used?</p>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                                <div>
                                    <span style="font-weight: 600;">Sophie Turner</span>
                                    <span style="color: #999; margin-left: 10px;">1 day ago</span>
                                </div>
                                <div>
                                    <span style="color: #666; margin-right: 15px;"><i class="fas fa-comment"></i> 3 answers</span>
                                    <span style="color: #999;"><i class="fas fa-clock"></i> Open</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="teaching">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Peer Teaching</h3>
                        <i class="fas fa-chalkboard-teacher card-icon"></i>
                    </div>
                    <div class="card-body">
                        <p>Share your knowledge by creating mini-lessons and earn Chemistry Points!</p>
                        
                        <div style="text-align: center; margin: 20px 0;">
                            <button class="btn">Create a Mini-Lesson</button>
                        </div>
                        
                        <h4>Popular Mini-Lessons</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                                <h4>Understanding Ionization Energy</h4>
                                <p style="color: #666; margin: 10px 0; font-size: 0.9rem;">A clear explanation of why ionization energy decreases down Group 1</p>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                                    <span style="font-size: 0.8rem; color: #666;">by Emma Rodriguez</span>
                                    <span style="color: var(--warning);"><i class="fas fa-star"></i> 4.8</span>
                                </div>
                            </div>
                            
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                                <h4>Flame Test Colors</h4>
                                <p style="color: #666; margin: 10px 0; font-size: 0.9rem;">Learn the characteristic flame colors of Group 1 metals</p>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                                    <span style="font-size: 0.8rem; color: #666;">by Michael Chen</span>
                                    <span style="color: var(--warning);"><i class="fas fa-star"></i> 4.6</span>
                                </div>
                            </div>
                            
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                                <h4>Safe Handling of Alkali Metals</h4>
                                <p style="color: #666; margin: 10px 0; font-size: 0.9rem;">Essential safety protocols for working with reactive metals</p>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                                    <span style="font-size: 0.8rem; color: #666;">by Sarah Miller</span>
                                    <span style="color: var(--warning);"><i class="fas fa-star"></i> 4.9</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Gamification Page -->
        <div id="gamification-page" class="page" style="display: none;">
            <div class="page-header">
                <h1 class="page-title">Gamification Dashboard</h1>
                <p class="page-subtitle">Track your achievements, points, and progress</p>
            </div>
            
            <div class="tabs">
                <div class="tab active" data-tab="badges">Badges</div>
                <div class="tab" data-tab="quests">Quests</div>
                <div class="tab" data-tab="leaderboard">Leaderboard</div>
                <div class="tab" data-tab="rewards">Rewards</div>
            </div>
            
            <div class="tab-content active" id="badges">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Achievement Badges</h3>
                        <i class="fas fa-medal card-icon"></i>
                    </div>
                    <div class="card-body">
                        <p>Collect badges by completing learning activities and mastering concepts.</p>
                        
                        <div class="badge-grid">
                            <div class="badge earned" data-badge="reactivity-master">
                                <i class="fas fa-fire"></i>
                                <span class="badge-name">Reactivity Master</span>
                                <div class="badge-tooltip">Complete all reaction experiments</div>
                            </div>
                            
                            <div class="badge earned" data-badge="atomic-explorer">
                                <i class="fas fa-atom"></i>
                                <span class="badge-name">Atomic Explorer</span>
                                <div class="badge-tooltip">Explore all Group 1 elements</div>
                            </div>
                            
                            <div class="badge earned" data-badge="lab-expert">
                                <i class="fas fa-flask"></i>
                                <span class="badge-name">Lab Expert</span>
                                <div class="badge-tooltip">Complete 10 virtual lab experiments</div>
                            </div>
                            
                            <div class="badge earned" data-badge="team-player">
                                <i class="fas fa-users"></i>
                                <span class="badge-name">Team Player</span>
                                <div class="badge-tooltip">Join 3 study groups</div>
                            </div>
                            
                            <div class="badge earned" data-badge="peer-teacher">
                                <i class="fas fa-chalkboard-teacher"></i>
                                <span class="badge-name">Peer Teacher</span>
                                <div class="badge-tooltip">Create 2 mini-lessons</div>
                            </div>
                            
                            <div class="badge earned" data-badge="quick-learner">
                                <i class="fas fa-brain"></i>
                                <span class="badge-name">Quick Learner</span>
                                <div class="badge-tooltip">Complete 5 modules in one week</div>
                            </div>
                            
                            <div class="badge locked" data-badge="alkali-master">
                                <i class="fas fa-trophy"></i>
                                <span class="badge-name">Alkali Master</span>
                                <div class="badge-tooltip">Earn all other badges</div>
                            </div>
                            
                            <div class="badge locked" data-badge="chemistry-champion">
                                <i class="fas fa-graduation-cap"></i>
                                <span class="badge-name">Chemistry Champion</span>
                                <div class="badge-tooltip">Score 90%+ on final exam</div>
                            </div>
                            
                            <div class="badge locked" data-badge="group1-guru">
                                <i class="fas fa-star"></i>
                                <span class="badge-name">Group 1 Guru</span>
                                <div class="badge-tooltip">Complete all course content</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="quests">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Learning Quests</h3>
                        <i class="fas fa-map-marked-alt card-icon"></i>
                    </div>
                    <div class="card-body">
                        <p>Embark on learning quests to earn points and unlock achievements.</p>
                        
                        <div class="quest-list">
                            <div class="quest-item" data-quest="sodium-investigations">
                                <div class="quest-icon">
                                    <i class="fas fa-vial"></i>
                                </div>
                                <div class="quest-content">
                                    <div class="quest-title">Sodium Investigations</div>
                                    <div class="quest-description">Complete all sodium-related experiments and lessons</div>
                                    <div class="quest-progress">
                                        <div class="quest-progress-bar">
                                            <div class="quest-progress-value" style="width: 75%;"></div>
                                        </div>
                                        <div class="quest-reward">+150 CP</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="quest-item" data-quest="element-explorer">
                                <div class="quest-icon">
                                    <i class="fas fa-atom"></i>
                                </div>
                                <div class="quest-content">
                                    <div class="quest-title">Element Explorer</div>
                                    <div class="quest-description">Study all Group 1 elements and their properties</div>
                                    <div class="quest-progress">
                                        <div class="quest-progress-bar">
                                            <div class="quest-progress-value" style="width: 50%;"></div>
                                        </div>
                                        <div class="quest-reward">+200 CP</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="quest-item" data-quest="social-learner">
                                <div class="quest-icon">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div class="quest-content">
                                    <div class="quest-title">Social Learner</div>
                                    <div class="quest-description">Join 2 study groups and participate in discussions</div>
                                    <div class="quest-progress">
                                        <div class="quest-progress-bar">
                                            <div class="quest-progress-value" style="width: 100%;"></div>
                                        </div>
                                        <div class="quest-reward">+100 CP</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="quest-item" data-quest="trend-master">
                                <div class="quest-icon">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <div class="quest-content">
                                    <div class="quest-title">Trend Master</div>
                                    <div class="quest-description">Master all periodic trends in Group 1 metals</div>
                                    <div class="quest-progress">
                                        <div class="quest-progress-bar">
                                            <div class="quest-progress-value" style="width: 30%;"></div>
                                        </div>
                                        <div class="quest-reward">+180 CP</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="leaderboard">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Leaderboard</h3>
                        <i class="fas fa-trophy card-icon"></i>
                    </div>
                    <div class="card-body">
                        <p>See how you rank against other students in your class.</p>
                        
                        <div style="margin-top: 20px;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr style="background: #f8f9fa;">
                                        <th style="padding: 12px; text-align: left;">Rank</th>
                                        <th style="padding: 12px; text-align: left;">Student</th>
                                        <th style="padding: 12px; text-align: left;">Chemistry Points</th>
                                        <th style="padding: 12px; text-align: left;">Badges</th>
                                        <th style="padding: 12px; text-align: left;">Level</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr style="border-bottom: 1px solid #eee;">
                                        <td style="padding: 12px;">1</td>
                                        <td style="padding: 12px;">
                                            <div style="display: flex; align-items: center;">
                                                <img src="https://randomuser.me/api/portraits/men/67.jpg" alt="User" style="width: 30px; height: 30px; border-radius: 50%; margin-right: 10px;">
                                                Michael Chen
                                            </div>
                                        </td>
                                        <td style="padding: 12px; font-weight: 600;">2,450</td>
                                        <td style="padding: 12px;">12</td>
                                        <td style="padding: 12px;">Researcher</td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid #eee;">
                                        <td style="padding: 12px;">2</td>
                                        <td style="padding: 12px;">
                                            <div style="display: flex; align-items: center;">
                                                <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="User" style="width: 30px; height: 30px; border-radius: 50%; margin-right: 10px;">
                                                Sarah Miller
                                            </div>
                                        </td>
                                        <td style="padding: 12px; font-weight: 600;">2,200</td>
                                        <td style="padding: 12px;">10</td>
                                        <td style="padding: 12px;">Researcher</td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid #eee;">
                                        <td style="padding: 12px;">3</td>
                                        <td style="padding: 12px;">
                                            <div style="display: flex; align-items: center;">
                                                <img src="https://randomuser.me/api/portraits/women/68.jpg" alt="User" style="width: 30px; height: 30px; border-radius: 50%; margin-right: 10px;">
                                                Emma Rodriguez
                                            </div>
                                        </td>
                                        <td style="padding: 12px; font-weight: 600;">1,980</td>
                                        <td style="padding: 12px;">9</td>
                                        <td style="padding: 12px;">Researcher</td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid #eee; background: rgba(74, 111, 165, 0.05);">
                                        <td style="padding: 12px;">4</td>
                                        <td style="padding: 12px;">
                                            <div style="display: flex; align-items: center;">
                                                <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="User" style="width: 30px; height: 30px; border-radius: 50%; margin-right: 10px;">
                                                <strong>You (Alex Johnson)</strong>
                                            </div>
                                        </td>
                                        <td style="padding: 12px; font-weight: 600;">1,750</td>
                                        <td style="padding: 12px;">8</td>
                                        <td style="padding: 12px;">Researcher</td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid #eee;">
                                        <td style="padding: 12px;">5</td>
                                        <td style="padding: 12px;">
                                            <div style="display: flex; align-items: center;">
                                                <img src="https://randomuser.me/api/portraits/men/45.jpg" alt="User" style="width: 30px; height: 30px; border-radius: 50%; margin-right: 10px;">
                                                James Wilson
                                            </div>
                                        </td>
                                        <td style="padding: 12px; font-weight: 600;">1,600</td>
                                        <td style="padding: 12px;">7</td>
                                        <td style="padding: 12px;">Researcher</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="rewards">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Rewards Store</h3>
                        <i class="fas fa-gift card-icon"></i>
                    </div>
                    <div class="card-body">
                        <p>Redeem your Chemistry Points for exciting rewards!</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; text-align: center;">
                                <i class="fas fa-certificate" style="font-size: 3rem; color: var(--primary); margin-bottom: 15px;"></i>
                                <h4>Digital Certificate</h4>
                                <p style="color: #666; margin: 10px 0;">Official certificate of completion</p>
                                <div style="font-weight: 600; color: var(--warning); margin-bottom: 15px;">500 CP</div>
                                <button class="btn btn-sm">Redeem</button>
                            </div>
                            
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; text-align: center;">
                                <i class="fas fa-book" style="font-size: 3rem; color: var(--primary); margin-bottom: 15px;"></i>
                                <h4>Extra Resources</h4>
                                <p style="color: #666; margin: 10px 0;">Unlock advanced learning materials</p>
                                <div style="font-weight: 600; color: var(--warning); margin-bottom: 15px;">750 CP</div>
                                <button class="btn btn-sm">Redeem</button>
                            </div>
                            
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; text-align: center;">
                                <i class="fas fa-star" style="font-size: 3rem; color: var(--primary); margin-bottom: 15px;"></i>
                                <h4>Profile Customization</h4>
                                <p style="color: #666; margin: 10px 0;">Special themes and avatars</p>
                                <div style="font-weight: 600; color: var(--warning); margin-bottom: 15px;">300 CP</div>
                                <button class="btn btn-sm">Redeem</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Progress Page -->
        <div id="progress-page" class="page" style="display: none;">
            <div class="page-header">
                <h1 class="page-title">Progress Tracking</h1>
                <p class="page-subtitle">Monitor your learning journey and identify areas for improvement</p>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Overall Progress</h3>
                    <i class="fas fa-chart-pie card-icon"></i>
                </div>
                <div class="card-body">
                    <div style="display: flex; align-items: center; justify-content: center; margin: 20px 0;">
                        <div style="position: relative; width: 200px; height: 200px;">
                            <svg viewBox="0 0 100 100" style="width: 100%; height: 100%;">
                                <circle cx="50" cy="50" r="45" fill="none" stroke="#eee" stroke-width="10"></circle>
                                <circle cx="50" cy="50" r="45" fill="none" stroke="url(#gradient)" stroke-width="10" stroke-dasharray="283" stroke-dashoffset="90" stroke-linecap="round" transform="rotate(-90 50 50)"></circle>
                                <defs>
                                    <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" stop-color="#4a6fa5"></stop>
                                        <stop offset="100%" stop-color="#6c63ff"></stop>
                                    </linearGradient>
                                </defs>
                            </svg>
                            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                                <div style="font-size: 2rem; font-weight: bold;">68%</div>
                                <div style="color: #666;">Complete</div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 30px;">
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: var(--primary);">24</div>
                            <div style="color: #666;">Lessons Completed</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: var(--primary);">8</div>
                            <div style="color: #666;">Experiments Done</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: var(--primary);">12</div>
                            <div style="color: #666;">Day Streak</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: var(--primary);">85%</div>
                            <div style="color: #666;">Quiz Average</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card" style="margin-top: 30px;">
                <div class="card-header">
                    <h3 class="card-title">Module Progress</h3>
                    <i class="fas fa-tasks card-icon"></i>
                </div>
                <div class="card-body">
                    <div class="progress-item">
                        <div class="progress-header">
                            <span class="progress-title">Group 1 Metals Overview</span>
                            <span class="progress-value">85%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress primary" style="width: 85%;"></div>
                        </div>
                    </div>
                    
                    <div class="progress-item">
                        <div class="progress-header">
                            <span class="progress-title">Physical Properties</span>
                            <span class="progress-value">70%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress primary" style="width: 70%;"></div>
                        </div>
                    </div>
                    
                    <div class="progress-item">
                        <div class="progress-header">
                            <span class="progress-title">Chemical Reactions</span>
                            <span class="progress-value">60%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress primary" style="width: 60%;"></div>
                        </div>
                    </div>
                    
                    <div class="progress-item">
                        <div class="progress-header">
                            <span class="progress-title">Practical Applications</span>
                            <span class="progress-value">45%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress warning" style="width: 45%;"></div>
                        </div>
                    </div>
                    
                    <div class="progress-item">
                        <div class="progress-header">
                            <span class="progress-title">Exam Preparation</span>
                            <span class="progress-value">55%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress success" style="width: 55%;"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card" style="margin-top: 30px;">
                <div class="card-header">
                    <h3 class="card-title">Recommendations</h3>
                    <i class="fas fa-lightbulb card-icon"></i>
                </div>
                <div class="card-body">
                    <div style="background: rgba(255, 193, 7, 0.1); border-left: 4px solid var(--warning); padding: 15px; border-radius: 5px; margin-bottom: 15px;">
                        <h4 style="color: var(--warning); margin-bottom: 5px;">Focus Area: Practical Applications</h4>
                        <p>Your progress in this module is below average. We recommend spending more time on real-world applications of Group 1 metals.</p>
                    </div>
                    
                    <div style="background: rgba(40, 167, 69, 0.1); border-left: 4px solid var(--success); padding: 15px; border-radius: 5px; margin-bottom: 15px;">
                        <h4 style="color: var(--success); margin-bottom: 5px;">Strength: Group 1 Metals Overview</h4>
                        <p>You're doing great in this module! Consider helping peers who might be struggling with these concepts.</p>
                    </div>
                    
                    <div style="background: rgba(108, 99, 255, 0.1); border-left: 4px solid var(--secondary); padding: 15px; border-radius: 5px;">
                        <h4 style="color: var(--secondary); margin-bottom: 5px;">Suggested Next Steps</h4>
                        <ul style="padding-left: 20px;">
                            <li>Complete the "Industrial Uses of Alkali Metals" lesson</li>
                            <li>Join the "Practical Applications" study group</li>
                            <li>Try the "Real-World Chemistry" quest</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!-- Quiz Page -->
        <div id="quiz-page" class="page" style="display: none;">
            <div class="page-header">
                <h1 class="page-title">Quiz Center</h1>
                <p class="page-subtitle">Test your knowledge of Group 1 metals</p>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Group 1 Metals Quiz</h3>
                    <i class="fas fa-question-circle card-icon"></i>
                </div>
                <div class="card-body">
                    <div class="quiz-container" id="quiz-container">
                        <div class="quiz-question" id="quiz-question-1">
                            <h4>Question 1 of 5</h4>
                            <p>Which of the following is NOT a Group 1 metal?</p>
                            <div class="quiz-options">
                                <div class="quiz-option" data-option="A">Sodium (Na)</div>
                                <div class="quiz-option" data-option="B">Potassium (K)</div>
                                <div class="quiz-option" data-option="C">Calcium (Ca)</div>
                                <div class="quiz-option" data-option="D">Lithium (Li)</div>
                            </div>
                            <div class="quiz-feedback" id="feedback-1"></div>
                        </div>
                        
                        <div class="quiz-question" id="quiz-question-2" style="display: none;">
                            <h4>Question 2 of 5</h4>
                            <p>What happens when Group 1 metals react with water?</p>
                            <div class="quiz-options">
                                <div class="quiz-option" data-option="A">They produce hydrogen gas and metal hydroxides</div>
                                <div class="quiz-option" data-option="B">They produce oxygen gas and metal oxides</div>
                                <div class="quiz-option" data-option="C">They produce carbon dioxide and metal carbonates</div>
                                <div class="quiz-option" data-option="D">No reaction occurs</div>
                            </div>
                            <div class="quiz-feedback" id="feedback-2"></div>
                        </div>
                        
                        <div class="quiz-question" id="quiz-question-3" style="display: none;">
                            <h4>Question 3 of 5</h4>
                            <p>Which Group 1 metal is the most reactive?</p>
                            <div class="quiz-options">
                                <div class="quiz-option" data-option="A">Lithium (Li)</div>
                                <div class="quiz-option" data-option="B">Sodium (Na)</div>
                                <div class="quiz-option" data-option="C">Potassium (K)</div>
                                <div class="quiz-option" data-option="D">Francium (Fr)</div>
                            </div>
                            <div class="quiz-feedback" id="feedback-3"></div>
                        </div>
                        
                        <div class="quiz-question" id="quiz-question-4" style="display: none;">
                            <h4>Question 4 of 5</h4>
                            <p>What is the trend in atomic radius down Group 1?</p>
                            <div class="quiz-options">
                                <div class="quiz-option" data-option="A">Decreases</div>
                                <div class="quiz-option" data-option="B">Increases</div>
                                <div class="quiz-option" data-option="C">Remains constant</div>
                                <div class="quiz-option" data-option="D">No clear trend</div>
                            </div>
                            <div class="quiz-feedback" id="feedback-4"></div>
                        </div>
                        
                        <div class="quiz-question" id="quiz-question-5" style="display: none;">
                            <h4>Question 5 of 5</h4>
                            <p>What is a common use of lithium?</p>
                            <div class="quiz-options">
                                <div class="quiz-option" data-option="A">Table salt</div>
                                <div class="quiz-option" data-option="B">Batteries</div>
                                <div class="quiz-option" data-option="C">Fertilizers</div>
                                <div class="quiz-option" data-option="B">Street lighting</div>
                            </div>
                            <div class="quiz-feedback" id="feedback-5"></div>
                        </div>
                        
                        <div class="quiz-navigation">
                            <button class="btn btn-outline" id="prev-question" disabled>Previous</button>
                            <button class="btn" id="next-question">Next</button>
                        </div>
                        
                        <div class="quiz-results" id="quiz-results">
                            <h3>Quiz Results</h3>
                            <div class="quiz-score" id="quiz-score">0%</div>
                            <p id="quiz-result-message"></p>
                            <button class="btn" id="retake-quiz">Retake Quiz</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Spaced Repetition Page -->
        <div id="spaced-page" class="page" style="display: none;">
            <div class="page-header">
                <h1 class="page-title">Spaced Repetition</h1>
                <p class="page-subtitle">Optimize your learning with scientifically-proven review intervals</p>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Review Cards</h3>
                    <i class="fas fa-redo card-icon"></i>
                </div>
                <div class="card-body">
                    <p>Review these concepts at optimal intervals to maximize retention.</p>
                    
                    <div class="spaced-repetition">
                        <div class="review-card">
                            <div class="review-question">What is the general trend in reactivity down Group 1?</div>
                            <div class="review-answer">
                                <p>Reactivity increases down Group 1 due to decreasing ionization energy. As you go down the group, the atomic radius increases and the outer electron is further from the nucleus, making it easier to lose.</p>
                            </div>
                            <div class="review-rating">
                                <button class="rating-btn" data-rating="1">1</button>
                                <button class="rating-btn" data-rating="2">2</button>
                                <button class="rating-btn" data-rating="3">3</button>
                                <button class="rating-btn" data-rating="4">4</button>
                                <button class="rating-btn" data-rating="5">5</button>
                            </div>
                        </div>
                        
                        <div class="review-card">
                            <div class="review-question">What products are formed when Group 1 metals react with water?</div>
                            <div class="review-answer">
                                <p>Group 1 metals react with water to produce hydrogen gas (H₂) and the corresponding metal hydroxide (MOH). The general equation is: 2M(s) + 2H₂O(l) → 2MOH(aq) + H₂(g)</p>
                            </div>
                            <div class="review-rating">
                                <button class="rating-btn" data-rating="1">1</button>
                                <button class="rating-btn" data-rating="2">2</button>
                                <button class="rating-btn" data-rating="3">3</button>
                                <button class="rating-btn" data-rating="4">4</button>
                                <button class="rating-btn" data-rating="5">5</button>
                            </div>
                        </div>
                        
                        <div class="review-card">
                            <div class="review-question">What is the trend in melting points down Group 1?</div>
                            <div class="review-answer">
                                <p>Melting points decrease down Group 1. This is due to weakening metallic bonding as the atomic size increases and the strength of the metallic bonds decreases.</p>
                            </div>
                            <div class="review-rating">
                                <button class="rating-btn" data-rating="1">1</button>
                                <button class="rating-btn" data-rating="2">2</button>
                                <button class="rating-btn" data-rating="3">3</button>
                                <button class="rating-btn" data-rating="4">4</button>
                                <button class="rating-btn" data-rating="5">5</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Resources Page -->
        <div id="resources-page" class="page" style="display: none;">
            <div class="page-header">
                <h1 class="page-title">Learning Resources</h1>
                <p class="page-subtitle">Additional materials to enhance your learning</p>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Downloadable Resources</h3>
                    <i class="fas fa-download card-icon"></i>
                </div>
                <div class="card-body">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; text-align: center;">
                            <i class="fas fa-file-pdf" style="font-size: 3rem; color: var(--primary); margin-bottom: 15px;"></i>
                            <h4>Group 1 Metals Handbook</h4>
                            <p style="color: #666; margin: 10px 0;">Comprehensive guide to Group 1 metals</p>
                            <button class="btn btn-sm">Download PDF</button>
                        </div>
                        
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; text-align: center;">
                            <i class="fas fa-file-video" style="font-size: 3rem; color: var(--primary); margin-bottom: 15px;"></i>
                            <h4>Experiment Videos</h4>
                            <p style="color: #666; margin: 10px 0;">Video demonstrations of reactions</p>
                            <button class="btn btn-sm">Watch Videos</button>
                        </div>
                        
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; text-align: center;">
                            <i class="fas fa-file-powerpoint" style="font-size: 3rem; color: var(--primary); margin-bottom: 15px;"></i>
                            <h4>Revision Slides</h4>
                            <p style="color: #666; margin: 10px 0;">Key concepts summarized</p>
                            <button class="btn btn-sm">Download PPT</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card" style="margin-top: 30px;">
                <div class="card-header">
                    <h3 class="card-title">External Links</h3>
                    <i class="fas fa-external-link-alt card-icon"></i>
                </div>
                <div class="card-body">
                    <ul style="padding-left: 20px;">
                        <li style="margin-bottom: 10px;"><a href="#" style="color: var(--primary);">Royal Society of Chemistry - Periodic Table</a></li>
                        <li style="margin-bottom: 10px;"><a href="#" style="color: var(--primary);">Khan Academy - Alkali Metals</a></li>
                        <li style="margin-bottom: 10px;"><a href="#" style="color: var(--primary);">YouTube - Group 1 Metals Experiments</a></li>
                        <li style="margin-bottom: 10px;"><a href="#" style="color: var(--primary);">BBC Bitesize - Group 1 Elements</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- Settings Page -->
        <div id="settings-page" class="page" style="display: none;">
            <div class="page-header">
                <h1 class="page-title">Settings</h1>
                <p class="page-subtitle">Customize your learning experience</p>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Account Settings</h3>
                    <i class="fas fa-user-cog card-icon"></i>
                </div>
                <div class="card-body">
                    <div style="display: flex; align-items: center; margin-bottom: 20px;">
                        <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Profile" style="width: 80px; height: 80px; border-radius: 50%; margin-right: 20px;">
                        <div>
                            <h4>Alex Johnson</h4>
                            <p>alex.johnson@example.com</p>
                            <button class="btn btn-sm" style="margin-top: 10px;">Change Avatar</button>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600;">Name</label>
                        <input type="text" value="Alex Johnson" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600;">Email</label>
                        <input type="email" value="alex.johnson@example.com" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                    </div>
                    
                    <button class="btn">Save Changes</button>
                </div>
            </div>
            
            <div class="card" style="margin-top: 30px;">
                <div class="card-header">
                    <h3 class="card-title">Learning Preferences</h3>
                    <i class="fas fa-sliders-h card-icon"></i>
                </div>
                <div class="card-body">
                    <div style="margin-bottom: 20px;">
                        <label style="display: flex; align-items: center; cursor: pointer;">
                            <input type="checkbox" id="dark-mode-toggle" style="margin-right: 10px;">
                            <span>Dark Mode</span>
                        </label>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: flex; align-items: center; cursor: pointer;">
                            <input type="checkbox" id="notifications-toggle" checked style="margin-right: 10px;">
                            <span>Enable Notifications</span>
                        </label>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600;">Font Size</label>
                        <select id="font-size-select" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                            <option value="small">Small</option>
                            <option value="medium" selected>Medium</option>
                            <option value="large">Large</option>
                        </select>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600;">Learning Difficulty</label>
                        <select id="difficulty-select" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                            <option value="beginner">Beginner</option>
                            <option value="intermediate" selected>Intermediate</option>
                            <option value="advanced">Advanced</option>
                        </select>
                    </div>
                    
                    <button class="btn">Save Preferences</button>
                </div>
            </div>
        </div>
    </main>
    <!-- Modal -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modal-title">Modal Title</h3>
                <button class="modal-close" id="modal-close">&times;</button>
            </div>
            <div class="modal-body" id="modal-body">
                <p>Modal content goes here.</p>
            </div>
        </div>
    </div>
    <!-- Accessibility Controls -->
    <div class="accessibility-controls">
        <button id="contrast-toggle" class="btn btn-sm" title="Toggle High Contrast">
            <i class="fas fa-adjust"></i>
        </button>
        <button id="font-decrease" class="btn btn-sm" title="Decrease Font Size">
            <i class="fas fa-minus"></i>
        </button>
        <button id="font-increase" class="btn btn-sm" title="Increase Font Size">
            <i class="fas fa-plus"></i>
        </button>
        <button id="screen-reader-toggle" class="btn btn-sm" title="Toggle Screen Reader Mode">
            <i class="fas fa-universal-access"></i>
        </button>
    </div>
    <!-- Voice Control Button -->
    <button class="voice-control-btn" id="voice-control-btn" title="Voice Control">
        <i class="fas fa-microphone"></i>
    </button>
    <!-- Live Region for Screen Reader -->
    <div id="live-region" class="sr-only" aria-live="polite" aria-atomic="true"></div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize all systems
            initializeApp();
        });
        function initializeApp() {
            // Core functionality
            initializeNavigation();
            initializeTabs();
            initializeElementInteraction();
            initializeLabExperiment();
            initializeGamification();
            initializeProgressTracking();
            initializeQuiz();
            initializeSpacedRepetition();
            
            // Enhanced features
            initializeAccessibility();
            initializeVoiceControl();
            initializeOfflineMode();
            initializeAdaptiveLearning();
            initializeSettings();
            
            // Load user data
            loadUserData();
            
            // Set up event listeners
            setupEventListeners();
            
            // Animate progress bars on load
            setTimeout(animateProgressBars, 500);
        }
        // Navigation
        function initializeNavigation() {
            const menuToggle = document.getElementById('menu-toggle');
            const sidebar = document.getElementById('sidebar');
            const menuItems = document.querySelectorAll('.menu-item');
            const pages = document.querySelectorAll('.page');
            
            menuToggle.addEventListener('click', () => {
                sidebar.classList.toggle('active');
            });
            
            menuItems.forEach(item => {
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    
                    // Remove active class from all menu items and pages
                    menuItems.forEach(i => i.classList.remove('active'));
                    pages.forEach(p => p.style.display = 'none');
                    
                    // Add active class to clicked menu item
                    item.classList.add('active');
                    
                    // Show corresponding page
                    const pageId = item.getAttribute('data-page') + '-page';
                    document.getElementById(pageId).style.display = 'block';
                    
                    // Close sidebar on mobile
                    if (window.innerWidth <= 992) {
                        sidebar.classList.remove('active');
                    }
                });
            });
        }
        // Tabs
        function initializeTabs() {
            const tabs = document.querySelectorAll('.tab');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabContainer = tab.parentElement;
                    const tabContents = tabContainer.parentElement.querySelectorAll('.tab-content');
                    
                    // Remove active class from all tabs in this container
                    tabContainer.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    
                    // Add active class to clicked tab
                    tab.classList.add('active');
                    
                    // Hide all tab contents
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // Show corresponding tab content
                    const tabId = tab.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            });
        }
        // Element Interaction in Learning Hub
        function initializeElementInteraction() {
            const elementCards = document.querySelectorAll('#elements .element-card');
            const elementDetails = document.getElementById('element-details');
            const elementTitle = document.getElementById('element-title');
            const elementInfo = document.getElementById('element-info');
            const elementSelect = document.getElementById('element-select');
            
            const elementData = {
                Li: {
                    name: 'Lithium',
                    atomicNumber: 3,
                    atomicMass: '6.94',
                    electronConfig: '1s² 2s¹',
                    description: 'Lightest metal, used in batteries, mood-stabilizing drugs. Floats on water, reacts slowly.',
                    physicalProperties: 'Soft, can be cut with a knife. Low density; floats on water. Shiny when freshly cut but tarnishes quickly in air. Low melting and boiling points.',
                    chemicalProperties: 'Very reactive; reacts vigorously with water and oxygen. Forms alkaline hydroxides in water, releasing hydrogen gas.',
                    uses: 'Batteries, mood-stabilizing drugs.',
                    safety: 'Store under oil to prevent reactions. Handle with caution.'
                },
                Na: {
                    name: 'Sodium',
                    atomicNumber: 11,
                    atomicMass: '22.99',
                    electronConfig: '1s² 2s² 2p⁶ 3s¹',
                    description: 'Soft, silvery-white metal. Reacts vigorously with water, forms sodium hydroxide and hydrogen.',
                    physicalProperties: 'Soft, silvery-white, highly reactive metal. Low density; less dense than water. Shiny when freshly cut but tarnishes quickly. Low melting and boiling points.',
                    chemicalProperties: 'Very reactive; reacts vigorously with water and oxygen. Forms alkaline hydroxides in water, releasing hydrogen gas.',
                    uses: 'Street lamps, table salt (NaCl), chemical industry.',
                    safety: 'Store under oil to prevent reactions. Handle with caution.'
                },
                K: {
                    name: 'Potassium',
                    atomicNumber: 19,
                    atomicMass: '39.10',
                    electronConfig: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s¹',
                    description: 'Soft, very reactive, ignites in water. Used in fertilizers and fireworks.',
                    physicalProperties: 'Soft, silvery-white metal. Less dense than water. Shiny when freshly cut but tarnishes quickly. Low melting and boiling points.',
                    chemicalProperties: 'Very reactive; reacts vigorously with water and oxygen. Forms alkaline hydroxides in water, releasing hydrogen gas. Reacts violently with water, igniting hydrogen.',
                    uses: 'Fertilizers, fireworks, soap production.',
                    safety: 'Store under oil to prevent reactions. Handle with caution.'
                },
                Rb: {
                    name: 'Rubidium',
                    atomicNumber: 37,
                    atomicMass: '85.47',
                    electronConfig: '[Kr] 5s¹',
                    description: 'Rare, highly reactive, melts slightly above room temperature. Used in research and electronics.',
                    physicalProperties: 'Soft, silvery-white metal. Highly reactive. Low melting point (melts slightly above room temperature). Shiny when freshly cut but tarnishes quickly.',
                    chemicalProperties: 'Very reactive; reacts vigorously with water and oxygen. Forms alkaline hydroxides in water, releasing hydrogen gas. Reacts explosively with water.',
                    uses: 'Research, electronics, specialty glasses.',
                    safety: 'Store under oil to prevent reactions. Handle with extreme caution.'
                },
                Cs: {
                    name: 'Cesium',
                    atomicNumber: 55,
                    atomicMass: '132.91',
                    electronConfig: '[Xe] 6s¹',
                    description: 'Soft, melts near room temperature. Used in atomic clocks and vacuum tubes.',
                    physicalProperties: 'Soft, golden-colored metal. Extremely reactive. Low melting point (melts near room temperature). Shiny when freshly cut but tarnishes quickly.',
                    chemicalProperties: 'Very reactive; reacts vigorously with water and oxygen. Forms alkaline hydroxides in water, releasing hydrogen gas. Reacts explosively with water, even ice.',
                    uses: 'Atomic clocks, vacuum tubes, photoelectric cells.',
                    safety: 'Store under oil to prevent reactions. Handle with extreme caution.'
                },
                Fr: {
                    name: 'Francium',
                    atomicNumber: 87,
                    atomicMass: '223',
                    electronConfig: '[Rn] 7s¹',
                    description: 'Extremely rare and radioactive. No widespread practical uses due to radioactivity.',
                    physicalProperties: 'Highly radioactive, extremely rare metal. Predicted to be soft and highly reactive.',
                    chemicalProperties: 'Predicted to be more reactive than cesium. Forms alkaline hydroxides in water, releasing hydrogen gas.',
                    uses: 'No widespread practical uses due to radioactivity. Research purposes only.',
                    safety: 'Requires specialized handling due to radioactivity. Not commonly handled outside research.'
                }
            };
            
            elementCards.forEach(card => {
                card.addEventListener('click', () => {
                    // Remove selected class from all cards
                    elementCards.forEach(c => c.classList.remove('selected'));
                    
                    // Add selected class to clicked card
                    card.classList.add('selected');
                    
                    // Get element symbol
                    const element = card.getAttribute('data-element');
                    const data = elementData[element];
                    
                    // Update element details
                    elementTitle.textContent = data.name + ' (' + element + ')';
                    elementInfo.innerHTML = `
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                            <div>
                                <h4>Atomic Number</h4>
                                <p>${data.atomicNumber}</p>
                            </div>
                            <div>
                                <h4>Atomic Mass</h4>
                                <p>${data.atomicMass}</p>
                            </div>
                            <div>
                                <h4>Electron Configuration</h4>
                                <p>${data.electronConfig}</p>
                            </div>
                        </div>
                        <div style="margin-top: 20px;">
                            <h4>Description</h4>
                            <p>${data.description}</p>
                        </div>
                        <div style="margin-top: 15px;">
                            <h4>Physical Properties</h4>
                            <p>${data.physicalProperties}</p>
                        </div>
                        <div style="margin-top: 15px;">
                            <h4>Chemical Properties</h4>
                            <p>${data.chemicalProperties}</p>
                        </div>
                        <div style="margin-top: 15px;">
                            <h4>Uses</h4>
                            <p>${data.uses}</p>
                        </div>
                        <div style="margin-top: 15px;">
                            <h4>Safety</h4>
                            <p>${data.safety}</p>
                        </div>
                    `;
                    
                    // Show element details
                    elementDetails.style.display = 'block';
                    
                    // Update 3D model selector
                    elementSelect.value = element;
                    update3DModel(element);
                });
            });
            
            // Element select for 3D model
            elementSelect.addEventListener('change', (e) => {
                const element = e.target.value;
                if (element) {
                    update3DModel(element);
                    
                    // Also select the corresponding element card
                    elementCards.forEach(card => {
                        card.classList.remove('selected');
                        if (card.getAttribute('data-element') === element) {
                            card.classList.add('selected');
                        }
                    });
                }
            });
        }
        // Update 3D Model (simulated)
        function update3DModel(element) {
            const atom3d = document.getElementById('atom-3d');
            const elementNames = {
                Li: 'Lithium',
                Na: 'Sodium',
                K: 'Potassium',
                Rb: 'Rubidium',
                Cs: 'Cesium',
                Fr: 'Francium'
            };
            
            atom3d.innerHTML = `
                <div style="display: flex; align-items: center; justify-content: center; height: 100%; flex-direction: column;">
                    <i class="fas fa-atom" style="font-size: 4rem; color: var(--primary); margin-bottom: 20px; animation: pulse 2s infinite;"></i>
                    <h3>${elementNames[element]} Atom</h3>
                    <p style="color: #666; margin-top: 10px;">3D visualization of atomic structure</p>
                    <div style="margin-top: 20px; text-align: center;">
                        <div style="display: inline-block; margin: 0 10px; padding: 10px; background: #f8f9fa; border-radius: 10px;">
                            <strong>Nucleus:</strong> ${element}+
                        </div>
                        <div style="display: inline-block; margin: 0 10px; padding: 10px; background: #f8f9fa; border-radius: 10px;">
                            <strong>Electrons:</strong> 1
                        </div>
                    </div>
                </div>
            `;
        }
        // Virtual Lab
        function initializeLabExperiment() {
            const labEquipment = document.querySelectorAll('.lab-equipment');
            const labElements = document.querySelectorAll('#lab-page .element-card');
            const startLabExperiment = document.getElementById('start-lab-experiment');
            const labReactionArea = document.getElementById('lab-reaction-area');
            
            let selectedEquipment = null;
            let selectedLabElement = null;
            
            labEquipment.forEach(equipment => {
                equipment.addEventListener('click', () => {
                    // Remove selected class from all equipment
                    labEquipment.forEach(e => e.classList.remove('selected'));
                    
                    // Add selected class to clicked equipment
                    equipment.classList.add('selected');
                    
                    // Store selected equipment
                    selectedEquipment = equipment.getAttribute('data-equipment');
                });
            });
            
            labElements.forEach(element => {
                element.addEventListener('click', () => {
                    // Remove selected class from all elements
                    labElements.forEach(e => e.classList.remove('selected'));
                    
                    // Add selected class to clicked element
                    element.classList.add('selected');
                    
                    // Store selected element
                    selectedLabElement = element.getAttribute('data-element');
                });
            });
            
            startLabExperiment.addEventListener('click', () => {
                if (selectedEquipment && selectedLabElement) {
                    const elementName = document.querySelector(`#lab-page [data-element="${selectedLabElement}"] .element-name`).textContent;
                    const equipmentName = document.querySelector(`[data-equipment="${selectedEquipment}"] div`).textContent;
                    
                    labReactionArea.innerHTML = `
                        <div style="text-align: center;">
                            <h3>Experiment in Progress</h3>
                            <div style="margin: 20px 0; font-size: 3rem;">
                                ${selectedLabElement} + ${equipmentName}
                            </div>
                            <p>${elementName} is reacting with ${equipmentName}...</p>
                            <div style="margin-top: 20px;">
                                <div style="display: inline-block; padding: 10px 20px; background: rgba(40, 167, 69, 0.1); color: var(--success); border-radius: 5px;">
                                    <i class="fas fa-check-circle"></i> Experiment completed successfully!
                                </div>
                            </div>
                            <p style="margin-top: 15px;">+50 Chemistry Points earned</p>
                        </div>
                    `;
                    
                    // Award points
                    gamificationSystem.addPoints(50);
                    
                    // Check for achievements
                    if (selectedEquipment === 'water') {
                        gamificationSystem.unlockAchievement('reactivity-master');
                    }
                } else {
                    labReactionArea.innerHTML = `
                        <p style="color: var(--warning);">Please select both equipment and an element to start the experiment.</p>
                    `;
                }
            });
        }
        // Gamification System
        class GamificationSystem {
            constructor() {
                this.achievements = this.loadAchievements();
                this.points = this.loadPoints();
                this.level = this.calculateLevel(this.points);
            }
            
            loadAchievements() {
                const saved = localStorage.getItem('achievements');
                return saved ? JSON.parse(saved) : [];
            }
            
            loadPoints() {
                const saved = localStorage.getItem('points');
                return saved ? parseInt(saved) : 0;
            }
            
            saveAchievements() {
                localStorage.setItem('achievements', JSON.stringify(this.achievements));
            }
            
            savePoints() {
                localStorage.setItem('points', this.points.toString());
            }
            
            calculateLevel(points) {
                // Level calculation: each level requires 20% more points than the previous
                let level = 1;
                let pointsRequired = 100;
                
                while (points >= pointsRequired) {
                    level++;
                    pointsRequired = Math.floor(pointsRequired * 1.2);
                }
                
                return level;
            }
            
            addPoints(amount) {
                this.points += amount;
                this.savePoints();
                
                // Check if level up
                const newLevel = this.calculateLevel(this.points);
                if (newLevel > this.level) {
                    this.level = newLevel;
                    this.showLevelUpNotification();
                }
                
                // Update UI
                this.updatePointsDisplay();
            }
            
            unlockAchievement(achievementId) {
                if (!this.achievements.includes(achievementId)) {
                    this.achievements.push(achievementId);
                    this.saveAchievements();
                    
                    // Show achievement notification
                    this.showAchievementNotification(achievementId);
                    
                    // Award points for achievement
                    this.addPoints(50);
                    
                    // Update badge display
                    const badgeElement = document.querySelector(`[data-badge="${achievementId}"]`);
                    if (badgeElement) {
                        badgeElement.classList.remove('locked');
                        badgeElement.classList.add('earned');
                    }
                }
            }
            
            showLevelUpNotification() {
                const notification = document.createElement('div');
                notification.className = 'notification level-up';
                notification.innerHTML = `
                    <div class="notification-content">
                        <i class="fas fa-level-up-alt"></i>
                        <div>
                            <div class="notification-title">Level Up!</div>
                            <div>You reached level ${this.level}</div>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                // Auto remove after 5 seconds
                setTimeout(() => {
                    notification.remove();
                }, 5000);
            }
            
            showAchievementNotification(achievementId) {
                const achievements = {
                    'reactivity-master': { name: 'Reactivity Master', icon: 'fa-fire' },
                    'atomic-explorer': { name: 'Atomic Explorer', icon: 'fa-atom' },
                    'lab-expert': { name: 'Lab Expert', icon: 'fa-flask' },
                    'team-player': { name: 'Team Player', icon: 'fa-users' },
                    'peer-teacher': { name: 'Peer Teacher', icon: 'fa-chalkboard-teacher' },
                    'quick-learner': { name: 'Quick Learner', icon: 'fa-brain' },
                    'alkali-master': { name: 'Alkali Master', icon: 'fa-trophy' },
                    'chemistry-champion': { name: 'Chemistry Champion', icon: 'fa-graduation-cap' },
                    'group1-guru': { name: 'Group 1 Guru', icon: 'fa-star' }
                };
                
                const achievement = achievements[achievementId];
                
                const notification = document.createElement('div');
                notification.className = 'notification achievement';
                notification.innerHTML = `
                    <div class="notification-content">
                        <i class="fas ${achievement.icon}"></i>
                        <div>
                            <div class="notification-title">Achievement Unlocked!</div>
                            <div>${achievement.name}</div>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                // Auto remove after 5 seconds
                setTimeout(() => {
                    notification.remove();
                }, 5000);
            }
            
            updatePointsDisplay() {
                const pointsDisplay = document.getElementById('user-points-display');
                const levelDisplay = document.getElementById('user-level-display');
                
                if (pointsDisplay) {
                    pointsDisplay.textContent = this.points.toLocaleString();
                }
                
                if (levelDisplay) {
                    levelDisplay.textContent = this.level;
                }
            }
        }
        // Initialize gamification
        const gamificationSystem = new GamificationSystem();
        // Progress Tracking
        function initializeProgressTracking() {
            // Animate progress bars on page load
            setTimeout(() => {
                document.querySelectorAll('.progress').forEach(bar => {
                    const width = bar.style.width;
                    bar.style.width = '0%';
                    setTimeout(() => {
                        bar.style.width = width;
                    }, 100);
                });
            }, 500);
        }
        function animateProgressBars() {
            document.querySelectorAll('.progress').forEach(bar => {
                const width = bar.style.width;
                bar.style.width = '0%';
                setTimeout(() => {
                    bar.style.width = width;
                }, 100);
            });
        }
        // Quiz System
        function initializeQuiz() {
            const quizQuestions = document.querySelectorAll('.quiz-question');
            const quizOptions = document.querySelectorAll('.quiz-option');
            const prevButton = document.getElementById('prev-question');
            const nextButton = document.getElementById('next-question');
            const retakeButton = document.getElementById('retake-quiz');
            const quizResults = document.getElementById('quiz-results');
            
            let currentQuestion = 0;
            let userAnswers = [];
            let score = 0;
            
            const correctAnswers = {
                1: 'C', // Calcium is not a Group 1 metal
                2: 'A', // They produce hydrogen gas and metal hydroxides
                3: 'D', // Francium is the most reactive
                4: 'B', // Atomic radius increases down the group
                5: 'B'  // Lithium is used in batteries
            };
            
            const feedbackMessages = {
                1: {
                    correct: 'Correct! Calcium (Ca) is in Group 2, not Group 1.',
                    incorrect: 'Incorrect. Calcium (Ca) is in Group 2, not Group 1. The correct answer is C.'
                },
                2: {
                    correct: 'Correct! Group 1 metals react with water to produce hydrogen gas and metal hydroxides.',
                    incorrect: 'Incorrect. Group 1 metals react with water to produce hydrogen gas and metal hydroxides. The correct answer is A.'
                },
                3: {
                    correct: 'Correct! Reactivity increases down Group 1, making francium the most reactive.',
                    incorrect: 'Incorrect. Reactivity increases down Group 1, making francium the most reactive. The correct answer is D.'
                },
                4: {
                    correct: 'Correct! Atomic radius increases down the group due to additional electron shells.',
                    incorrect: 'Incorrect. Atomic radius increases down the group due to additional electron shells. The correct answer is B.'
                },
                5: {
                    correct: 'Correct! Lithium is commonly used in batteries, especially lithium-ion batteries.',
                    incorrect: 'Incorrect. Lithium is commonly used in batteries, especially lithium-ion batteries. The correct answer is B.'
                }
            };
            
            // Handle option selection
            quizOptions.forEach(option => {
                option.addEventListener('click', () => {
                    const questionId = option.closest('.quiz-question').id.split('-')[2];
                    const selectedOption = option.getAttribute('data-option');
                    
                    // Clear previous selections
                    document.querySelectorAll(`#quiz-question-${questionId} .quiz-option`).forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // Mark selected option
                    option.classList.add('selected');
                    
                    // Store user answer
                    userAnswers[questionId - 1] = selectedOption;
                    
                    // Show feedback
                    const feedback = document.getElementById(`feedback-${questionId}`);
                    feedback.style.display = 'block';
                    
                    if (selectedOption === correctAnswers[questionId]) {
                        option.classList.add('correct');
                        feedback.className = 'quiz-feedback correct';
                        feedback.innerHTML = `<i class="fas fa-check-circle"></i> ${feedbackMessages[questionId].correct}`;
                    } else {
                        option.classList.add('incorrect');
                        feedback.className = 'quiz-feedback incorrect';
                        feedback.innerHTML = `<i class="fas fa-times-circle"></i> ${feedbackMessages[questionId].incorrect}`;
                        
                        // Show correct answer
                        document.querySelectorAll(`#quiz-question-${questionId} .quiz-option`).forEach(opt => {
                            if (opt.getAttribute('data-option') === correctAnswers[questionId]) {
                                opt.classList.add('correct');
                            }
                        });
                    }
                });
            });
            
            // Navigation buttons
            prevButton.addEventListener('click', () => {
                if (currentQuestion > 0) {
                    document.getElementById(`quiz-question-${currentQuestion + 1}`).style.display = 'none';
                    currentQuestion--;
                    document.getElementById(`quiz-question-${currentQuestion + 1}`).style.display = 'block';
                    
                    // Update button states
                    prevButton.disabled = currentQuestion === 0;
                    nextButton.textContent = currentQuestion === 4 ? 'Finish' : 'Next';
                }
            });
            
            nextButton.addEventListener('click', () => {
                if (currentQuestion < 4) {
                    document.getElementById(`quiz-question-${currentQuestion + 1}`).style.display = 'none';
                    currentQuestion++;
                    document.getElementById(`quiz-question-${currentQuestion + 1}`).style.display = 'block';
                    
                    // Update button states
                    prevButton.disabled = false;
                    nextButton.textContent = currentQuestion === 4 ? 'Finish' : 'Next';
                } else {
                    // Finish quiz
                    finishQuiz();
                }
            });
            
            function finishQuiz() {
                // Calculate score
                score = 0;
                for (let i = 0; i < 5; i++) {
                    if (userAnswers[i] === correctAnswers[i + 1]) {
                        score++;
                    }
                }
                
                const percentage = Math.round((score / 5) * 100);
                
                // Hide all questions
                quizQuestions.forEach(question => {
                    question.style.display = 'none';
                });
                
                // Hide navigation
                document.querySelector('.quiz-navigation').style.display = 'none';
                
                // Show results
                quizResults.style.display = 'block';
                document.getElementById('quiz-score').textContent = `${percentage}%`;
                
                // Result message based on score
                let message = '';
                if (percentage >= 80) {
                    message = 'Excellent work! You have a strong understanding of Group 1 metals.';
                } else if (percentage >= 60) {
                    message = 'Good job! You have a solid understanding of Group 1 metals, but there\'s room for improvement.';
                } else {
                    message = 'Keep studying! Review the material and try again to improve your understanding of Group 1 metals.';
                }
                
                document.getElementById('quiz-result-message').textContent = message;
                
                // Award points based on score
                const points = Math.floor(percentage / 10) * 10;
                gamificationSystem.addPoints(points);
                
                // Update adaptive learning
                if (window.adaptiveLearning) {
                    window.adaptiveLearning.updatePerformance('Group 1 Metals Quiz', percentage);
                }
            }
            
            // Retake quiz
            retakeButton.addEventListener('click', () => {
                // Reset quiz
                currentQuestion = 0;
                userAnswers = [];
                score = 0;
                
                // Show first question
                quizQuestions.forEach((question, index) => {
                    question.style.display = index === 0 ? 'block' : 'none';
                });
                
                // Reset options
                quizOptions.forEach(option => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                });
                
                // Hide feedback
                document.querySelectorAll('.quiz-feedback').forEach(feedback => {
                    feedback.style.display = 'none';
                });
                
                // Show navigation
                document.querySelector('.quiz-navigation').style.display = 'flex';
                
                // Hide results
                quizResults.style.display = 'none';
                
                // Reset buttons
                prevButton.disabled = true;
                nextButton.textContent = 'Next';
            });
        }
        // Spaced Repetition
        function initializeSpacedRepetition() {
            const reviewCards = document.querySelectorAll('.review-card');
            const ratingButtons = document.querySelectorAll('.rating-btn');
            
            reviewCards.forEach(card => {
                const showAnswerBtn = document.createElement('button');
                showAnswerBtn.className = 'btn btn-sm';
                showAnswerBtn.textContent = 'Show Answer';
                showAnswerBtn.style.marginTop = '15px';
                
                const answer = card.querySelector('.review-answer');
                answer.style.display = 'none';
                
                showAnswerBtn.addEventListener('click', () => {
                    answer.style.display = 'block';
                    showAnswerBtn.style.display = 'none';
                });
                
                card.insertBefore(showAnswerBtn, card.querySelector('.review-rating'));
            });
            
            ratingButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const card = button.closest('.review-card');
                    const cardId = Array.from(reviewCards).indexOf(card);
                    
                    // Clear previous selections
                    card.querySelectorAll('.rating-btn').forEach(btn => {
                        btn.classList.remove('selected');
                    });
                    
                    // Mark selected button
                    button.classList.add('selected');
                    
                    // Update spaced repetition schedule
                    if (window.spacedRepetition) {
                        window.spacedRepetition.updateItem(`card-${cardId}`, parseInt(button.getAttribute('data-rating')));
                    }
                    
                    // Show next card or completion message
                    setTimeout(() => {
                        card.style.display = 'none';
                        
                        const nextCard = reviewCards[cardId + 1];
                        if (nextCard) {
                            nextCard.style.display = 'block';
                        } else {
                            // All cards reviewed
                            const completionMsg = document.createElement('div');
                            completionMsg.className = 'card';
                            completionMsg.style.marginTop = '20px';
                            completionMsg.innerHTML = `
                                <div class="card-body" style="text-align: center;">
                                    <h3>Review Complete!</h3>
                                    <p>Great job! Your next review session has been scheduled.</p>
                                    <button class="btn" onclick="location.reload()">Start Over</button>
                                </div>
                            `;
                            
                            document.querySelector('.spaced-repetition').appendChild(completionMsg);
                        }
                    }, 1000);
                });
            });
        }
        // Accessibility
        function initializeAccessibility() {
            const accessibilityManager = new AccessibilityManager();
            accessibilityManager.loadPreferences();
        }
        class AccessibilityManager {
            constructor() {
                this.highContrastMode = false;
                this.fontSize = 'medium';
                this.screenReader = false;
                this.initializeControls();
            }
            
            initializeControls() {
                const contrastToggle = document.getElementById('contrast-toggle');
                const fontDecrease = document.getElementById('font-decrease');
                const fontIncrease = document.getElementById('font-increase');
                const screenReaderToggle = document.getElementById('screen-reader-toggle');
                
                contrastToggle.addEventListener('click', () => {
                    this.toggleHighContrast();
                });
                
                fontDecrease.addEventListener('click', () => {
                    this.decreaseFontSize();
                });
                
                fontIncrease.addEventListener('click', () => {
                    this.increaseFontSize();
                });
                
                screenReaderToggle.addEventListener('click', () => {
                    this.toggleScreenReader();
                });
            }
            
            toggleHighContrast() {
                this.highContrastMode = !this.highContrastMode;
                document.body.classList.toggle('high-contrast', this.highContrastMode);
                
                // Save preference
                localStorage.setItem('highContrast', this.highContrastMode);
            }
            
            decreaseFontSize() {
                const sizes = ['small', 'medium', 'large'];
                const currentIndex = sizes.indexOf(this.fontSize);
                
                if (currentIndex > 0) {
                    this.fontSize = sizes[currentIndex - 1];
                    this.applyFontSize();
                }
            }
            
            increaseFontSize() {
                const sizes = ['small', 'medium', 'large'];
                const currentIndex = sizes.indexOf(this.fontSize);
                
                if (currentIndex < sizes.length - 1) {
                    this.fontSize = sizes[currentIndex + 1];
                    this.applyFontSize();
                }
            }
            
            applyFontSize() {
                document.body.classList.remove('font-small', 'font-medium', 'font-large');
                document.body.classList.add(`font-${this.fontSize}`);
                
                // Save preference
                localStorage.setItem('fontSize', this.fontSize);
            }
            
            toggleScreenReader() {
                this.screenReader = !this.screenReader;
                
                if (this.screenReader) {
                    this.enableScreenReaderMode();
                } else {
                    this.disableScreenReaderMode();
                }
                
                // Save preference
                localStorage.setItem('screenReader', this.screenReader);
            }
            
            enableScreenReaderMode() {
                // Add ARIA attributes to interactive elements
                document.querySelectorAll('button, a, input, select, textarea').forEach(element => {
                    if (!element.getAttribute('aria-label')) {
                        const text = element.textContent.trim();
                        if (text) {
                            element.setAttribute('aria-label', text);
                        }
                    }
                });
                
                // Announce screen reader mode enabled
                this.announceToScreenReader('Screen reader mode enabled');
            }
            
            disableScreenReaderMode() {
                // Announce screen reader mode disabled
                this.announceToScreenReader('Screen reader mode disabled');
            }
            
            announceToScreenReader(message) {
                const liveRegion = document.getElementById('live-region');
                if (liveRegion) {
                    liveRegion.textContent = message;
                    
                    // Clear after announcement
                    setTimeout(() => {
                        liveRegion.textContent = '';
                    }, 1000);
                }
            }
            
            loadPreferences() {
                // Load saved preferences
                const highContrast = localStorage.getItem('highContrast') === 'true';
                const fontSize = localStorage.getItem('fontSize') || 'medium';
                const screenReader = localStorage.getItem('screenReader') === 'true';
                
                // Apply preferences
                if (highContrast) {
                    this.toggleHighContrast();
                }
                
                this.fontSize = fontSize;
                this.applyFontSize();
                
                if (screenReader) {
                    this.toggleScreenReader();
                }
            }
        }
        // Voice Control
        function initializeVoiceControl() {
            const voiceControl = new VoiceControl();
        }
        class VoiceControl {
            constructor() {
                this.recognition = null;
                this.isListening = false;
                this.commands = {
                    'go to dashboard': () => this.navigateTo('dashboard'),
                    'go to learning': () => this.navigateTo('learning'),
                    'go to lab': () => this.navigateTo('lab'),
                    'go to social': () => this.navigateTo('social'),
                    'go to gamification': () => this.navigateTo('gamification'),
                    'go to progress': () => this.navigateTo('progress'),
                    'go to quiz': () => this.navigateTo('quiz'),
                    'go to spaced': () => this.navigateTo('spaced'),
                    'go to resources': () => this.navigateTo('resources'),
                    'go to settings': () => this.navigateTo('settings'),
                    'start experiment': () => this.startExperiment(),
                    'next lesson': () => this.nextLesson(),
                    'previous lesson': () => this.previousLesson(),
                    'help': () => this.showHelp()
                };
                
                this.initializeVoiceControl();
            }
            
            initializeVoiceControl() {
                if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                    this.recognition = new SpeechRecognition();
                    
                    this.recognition.continuous = false;
                    this.recognition.interimResults = false;
                    this.recognition.lang = 'en-US';
                    
                    this.recognition.onresult = (event) => {
                        const command = event.results[0][0].transcript.toLowerCase().trim();
                        this.processCommand(command);
                    };
                    
                    this.recognition.onerror = (event) => {
                        console.error('Speech recognition error:', event.error);
                        this.stopListening();
                    };
                    
                    this.recognition.onend = () => {
                        this.stopListening();
                    };
                    
                    // Add voice control button
                    this.addVoiceControlButton();
                } else {
                    console.log('Speech recognition not supported');
                }
            }
            
            addVoiceControlButton() {
                const voiceButton = document.getElementById('voice-control-btn');
                
                voiceButton.addEventListener('click', () => {
                    if (this.isListening) {
                        this.stopListening();
                    } else {
                        this.startListening();
                    }
                });
            }
            
            startListening() {
                if (this.recognition && !this.isListening) {
                    this.recognition.start();
                    this.isListening = true;
                    
                    const voiceButton = document.getElementById('voice-control-btn');
                    voiceButton.classList.add('listening');
                    
                    // Show listening indicator
                    this.showListeningIndicator();
                }
            }
            
            stopListening() {
                if (this.recognition && this.isListening) {
                    this.recognition.stop();
                    this.isListening = false;
                    
                    const voiceButton = document.getElementById('voice-control-btn');
                    voiceButton.classList.remove('listening');
                    
                    // Hide listening indicator
                    this.hideListeningIndicator();
                }
            }
            
            showListeningIndicator() {
                const indicator = document.createElement('div');
                indicator.className = 'voice-listening-indicator';
                indicator.innerHTML = '<i class="fas fa-microphone"></i> Listening...';
                
                document.body.appendChild(indicator);
                this.listeningIndicator = indicator;
            }
            
            hideListeningIndicator() {
                if (this.listeningIndicator) {
                    this.listeningIndicator.remove();
                    this.listeningIndicator = null;
                }
            }
            
            processCommand(command) {
                console.log('Voice command:', command);
                
                // Check if command matches any predefined commands
                for (const [phrase, action] of Object.entries(this.commands)) {
                    if (command.includes(phrase)) {
                        action();
                        return;
                    }
                }
                
                // If no match, show help
                this.showHelp();
            }
            
            navigateTo(page) {
                // Find and click the corresponding menu item
                const menuItem = document.querySelector(`[data-page="${page}"]`);
                if (menuItem) {
                    menuItem.click();
                }
            }
            
            startExperiment() {
                // Check if we're on the lab page
                if (document.getElementById('lab-page').style.display !== 'none') {
                    const startButton = document.getElementById('start-lab-experiment');
                    if (startButton) {
                        startButton.click();
                    }
                } else {
                    // Navigate to lab page first
                    this.navigateTo('lab');
                    
                    // Wait for page to load, then start experiment
                    setTimeout(() => {
                        const startButton = document.getElementById('start-lab-experiment');
                        if (startButton) {
                            startButton.click();
                        }
                    }, 500);
                }
            }
            
            nextLesson() {
                // Implementation would depend on lesson structure
                console.log('Next lesson command');
            }
            
            previousLesson() {
                // Implementation would depend on lesson structure
                console.log('Previous lesson command');
            }
            
            showHelp() {
                const helpModal = document.createElement('div');
                helpModal.className = 'modal';
                helpModal.style.display = 'flex';
                helpModal.innerHTML = `
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 class="modal-title">Voice Commands</h3>
                            <button class="modal-close">&times;</button>
                        </div>
                        <div class="modal-body">
                            <ul>
                                <li>"Go to dashboard" - Navigate to dashboard</li>
                                <li>"Go to learning" - Navigate to learning hub</li>
                                <li>"Go to lab" - Navigate to virtual lab</li>
                                <li>"Go to social" - Navigate to social learning</li>
                                <li>"Go to gamification" - Navigate to gamification</li>
                                <li>"Go to progress" - Navigate to progress tracking</li>
                                <li>"Go to quiz" - Navigate to quiz</li>
                                <li>"Go to spaced" - Navigate to spaced repetition</li>
                                <li>"Go to resources" - Navigate to resources</li>
                                <li>"Go to settings" - Navigate to settings</li>
                                <li>"Start experiment" - Start lab experiment</li>
                                <li>"Next lesson" - Go to next lesson</li>
                                <li>"Previous lesson" - Go to previous lesson</li>
                                <li>"Help" - Show this help</li>
                            </ul>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(helpModal);
                
                helpModal.querySelector('.modal-close').addEventListener('click', () => {
                    helpModal.remove();
                });
                
                helpModal.addEventListener('click', (e) => {
                    if (e.target === helpModal) {
                        helpModal.remove();
                    }
                });
            }
        }
        // Offline Mode
        function initializeOfflineMode() {
            const offlineManager = new OfflineManager();
        }
        class OfflineManager {
            constructor() {
                this.isOnline = navigator.onLine;
                this.setupEventListeners();
            }
            
            setupEventListeners() {
                window.addEventListener('online', () => {
                    this.isOnline = true;
                    this.showOnlineStatus();
                    this.syncData();
                });
                
                window.addEventListener('offline', () => {
                    this.isOnline = false;
                    this.showOfflineStatus();
                });
            }
            
            showOnlineStatus() {
                const notification = document.createElement('div');
                notification.className = 'online-status';
                notification.innerHTML = '<i class="fas fa-wifi"></i> You are back online';
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }
            
            showOfflineStatus() {
                const notification = document.createElement('div');
                notification.className = 'offline-status';
                notification.innerHTML = '<i class="fas fa-wifi-slash"></i> You are offline. Some features may be limited.';
                
                document.body.appendChild(notification);
                this.offlineNotification = notification;
            }
            
            syncData() {
                // Remove offline notification
                if (this.offlineNotification) {
                    this.offlineNotification.remove();
                    this.offlineNotification = null;
                }
                
                // Get offline data and sync with server
                this.getOfflineData().then(offlineData => {
                    if (offlineData && offlineData.length > 0) {
                        this.syncWithServer(offlineData).then(() => {
                            this.clearOfflineData();
                            this.showSyncCompleteNotification();
                        });
                    }
                });
            }
            
            getOfflineData() {
                return new Promise((resolve) => {
                    const offlineData = localStorage.getItem('offlineData');
                    resolve(offlineData ? JSON.parse(offlineData) : []);
                });
            }
            
            syncWithServer(data) {
                return new Promise((resolve) => {
                    // Simulate server sync
                    setTimeout(() => {
                        console.log('Data synced with server:', data);
                        resolve();
                    }, 1000);
                });
            }
            
            clearOfflineData() {
                localStorage.removeItem('offlineData');
            }
            
            showSyncCompleteNotification() {
                const notification = document.createElement('div');
                notification.className = 'online-status';
                notification.innerHTML = '<i class="fas fa-check-circle"></i> Your data has been synced';
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }
            
            saveOfflineData(data) {
                const existingData = localStorage.getItem('offlineData');
                const offlineData = existingData ? JSON.parse(existingData) : [];
                offlineData.push(data);
                localStorage.setItem('offlineData', JSON.stringify(offlineData));
            }
            
            isAvailable() {
                return this.isOnline;
            }
        }
        // Adaptive Learning
        function initializeAdaptiveLearning() {
            window.adaptiveLearning = new AdaptiveLearning();
        }
        class AdaptiveLearning {
            constructor() {
                this.studentData = this.loadStudentData();
            }
            
            loadStudentData() {
                const saved = localStorage.getItem('studentData');
                return saved ? JSON.parse(saved) : {
                    strengths: [],
                    weaknesses: [],
                    learningPath: 'standard'
                };
            }
            
            saveStudentData() {
                localStorage.setItem('studentData', JSON.stringify(this.studentData));
            }
            
            updatePerformance(topic, score) {
                if (score >= 80) {
                    // Student is strong in this topic
                    if (!this.studentData.strengths.includes(topic)) {
                        this.studentData.strengths.push(topic);
                    }
                    
                    // Remove from weaknesses if present
                    const weaknessIndex = this.studentData.weaknesses.indexOf(topic);
                    if (weaknessIndex !== -1) {
                        this.studentData.weaknesses.splice(weaknessIndex, 1);
                    }
                } else if (score < 60) {
                    // Student is weak in this topic
                    if (!this.studentData.weaknesses.includes(topic)) {
                        this.studentData.weaknesses.push(topic);
                    }
                    
                    // Remove from strengths if present
                    const strengthIndex = this.studentData.strengths.indexOf(topic);
                    if (strengthIndex !== -1) {
                        this.studentData.strengths.splice(strengthIndex, 1);
                    }
                }
                
                // Update learning path based on performance
                this.updateLearningPath();
                
                this.saveStudentData();
                
                // Show recommendation
                this.showRecommendation();
            }
            
            updateLearningPath() {
                if (this.studentData.weaknesses.length > 2) {
                    // Student has multiple weaknesses - remedial path
                    this.studentData.learningPath = 'remedial';
                } else if (this.studentData.strengths.length > 3) {
                    // Student has multiple strengths - advanced path
                    this.studentData.learningPath = 'advanced';
                } else {
                    // Standard path
                    this.studentData.learningPath = 'standard';
                }
            }
            
            getNextRecommendation() {
                // Recommend content based on learning path
                if (this.studentData.learningPath === 'remedial') {
                    // Focus on weaknesses
                    return {
                        type: 'Remedial',
                        topic: this.studentData.weaknesses[0] || 'Practice Problems',
                        reason: 'You need more practice in this area'
                    };
                } else if (this.studentData.learningPath === 'advanced') {
                    // Recommend advanced content
                    return {
                        type: 'Advanced',
                        topic: 'Advanced Applications',
                        reason: 'You\'re ready for more challenging content'
                    };
                } else {
                    // Standard path - continue with curriculum
                    return {
                        type: 'Standard',
                        topic: 'Next Module',
                        reason: 'Continue with your learning journey'
                    };
                }
            }
            
            showRecommendation() {
                const recommendation = this.getNextRecommendation();
                const recommendationCard = document.getElementById('recommendation-card');
                
                if (recommendationCard) {
                    document.getElementById('recommendation-type').textContent = recommendation.type;
                    document.getElementById('recommendation-topic').textContent = recommendation.topic;
                    document.getElementById('recommendation-reason').textContent = recommendation.reason;
                    
                    recommendationCard.style.display = 'block';
                }
            }
        }
        // Spaced Repetition System
        class SpacedRepetition {
            constructor() {
                this.schedule = this.loadSchedule();
            }
            
            loadSchedule() {
                const saved = localStorage.getItem('spacedRepetition');
                return saved ? JSON.parse(saved) : {};
            }
            
            saveSchedule() {
                localStorage.setItem('spacedRepetition', JSON.stringify(this.schedule));
            }
            
            reviewItem(itemId) {
                if (!this.schedule[itemId]) {
                    this.schedule[itemId] = {
                        level: 0,
                        nextReview: Date.now()
                    };
                }
                
                const now = Date.now();
                if (now >= this.schedule[itemId].nextReview) {
                    // Item is due for review
                    return true;
                }
                return false;
            }
            
            updateItem(itemId, quality) {
                if (!this.schedule[itemId]) {
                    this.schedule[itemId] = { level: 0 };
                }
                
                // SM-2 algorithm implementation
                const item = this.schedule[itemId];
                if (quality >= 3) {
                    if (item.level === 0) {
                        item.level = 1;
                    } else {
                        item.level = item.level * item.interval;
                    }
                } else {
                    item.level = 0;
                }
                
                item.interval = this.calculateInterval(item.level);
                item.nextReview = Date.now() + item.interval * 24 * 60 * 60 * 1000; // Convert days to ms
                
                this.saveSchedule();
            }
            
            calculateInterval(level) {
                if (level === 0) return 1;
                if (level === 1) return 6;
                return level * 4; // Subsequent intervals
            }
        }
        // Settings
        function initializeSettings() {
            // Dark mode toggle
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            if (darkModeToggle) {
                darkModeToggle.addEventListener('change', () => {
                    document.body.classList.toggle('dark-mode', darkModeToggle.checked);
                    
                    // Save preference
                    const userData = JSON.parse(localStorage.getItem('userData') || '{}');
                    userData.darkMode = darkModeToggle.checked;
                    localStorage.setItem('userData', JSON.stringify(userData));
                });
            }
            
            // Font size select
            const fontSizeSelect = document.getElementById('font-size-select');
            if (fontSizeSelect) {
                fontSizeSelect.addEventListener('change', () => {
                    document.body.classList.remove('font-small', 'font-medium', 'font-large');
                    document.body.classList.add(`font-${fontSizeSelect.value}`);
                    
                    // Save preference
                    const userData = JSON.parse(localStorage.getItem('userData') || '{}');
                    userData.fontSize = fontSizeSelect.value;
                    localStorage.setItem('userData', JSON.stringify(userData));
                });
            }
            
            // Difficulty select
            const difficultySelect = document.getElementById('difficulty-select');
            if (difficultySelect) {
                difficultySelect.addEventListener('change', () => {
                    // Save preference
                    const userData = JSON.parse(localStorage.getItem('userData') || '{}');
                    userData.difficulty = difficultySelect.value;
                    localStorage.setItem('userData', JSON.stringify(userData));
                });
            }
            
            // Notifications toggle
            const notificationsToggle = document.getElementById('notifications-toggle');
            if (notificationsToggle) {
                notificationsToggle.addEventListener('change', () => {
                    // Save preference
                    const userData = JSON.parse(localStorage.getItem('userData') || '{}');
                    userData.notifications = notificationsToggle.checked;
                    localStorage.setItem('userData', JSON.stringify(userData));
                });
            }
        }
        // Load User Data
        function loadUserData() {
            // Load user preferences and data
            const userData = localStorage.getItem('userData');
            if (userData) {
                const data = JSON.parse(userData);
                
                // Apply user preferences
                if (data.darkMode) {
                    document.body.classList.add('dark-mode');
                    const darkModeToggle = document.getElementById('dark-mode-toggle');
                    if (darkModeToggle) {
                        darkModeToggle.checked = true;
                    }
                }
                
                if (data.fontSize) {
                    document.body.classList.add(`font-${data.fontSize}`);
                    const fontSizeSelect = document.getElementById('font-size-select');
                    if (fontSizeSelect) {
                        fontSizeSelect.value = data.fontSize;
                    }
                }
                
                if (data.difficulty) {
                    const difficultySelect = document.getElementById('difficulty-select');
                    if (difficultySelect) {
                        difficultySelect.value = data.difficulty;
                    }
                }
                
                if (data.notifications !== undefined) {
                    const notificationsToggle = document.getElementById('notifications-toggle');
                    if (notificationsToggle) {
                        notificationsToggle.checked = data.notifications;
                    }
                }
            }
        }
        // Setup Event Listeners
        function setupEventListeners() {
            // Modal functionality
            const modal = document.getElementById('modal');
            const modalClose = document.getElementById('modal-close');
            
            if (modalClose) {
                modalClose.addEventListener('click', () => {
                    modal.style.display = 'none';
                });
            }
            
            window.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            });
            
            // Chat functionality
            window.sendChatMessage = function(groupId) {
                const input = document.getElementById(`message-input-${groupId}`);
                const message = input.value.trim();
                
                if (message) {
                    // Add message to chat
                    const chatMessages = document.getElementById(`chat-${groupId}`);
                    const messageElement = document.createElement('div');
                    messageElement.className = 'chat-message';
                    messageElement.innerHTML = `
                        <div class="message-header">
                            <span class="message-user">You</span>
                            <span class="message-time">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
                        </div>
                        <div class="message-content">${message}</div>
                    `;
                    
                    chatMessages.appendChild(messageElement);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                    
                    // Clear input
                    input.value = '';
                    
                    // Award points for social interaction
                    gamificationSystem.addPoints(5);
                }
            };
            
            // Handle enter key in chat inputs
            document.querySelectorAll('.chat-input input').forEach(input => {
                input.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        const groupId = input.id.replace('message-input-', '');
                        sendChatMessage(groupId);
                    }
                });
            });
            
            // Dark mode toggle
            const darkModeToggle = document.createElement('button');
            darkModeToggle.innerHTML = '<i class="fas fa-moon"></i>';
            darkModeToggle.className = 'btn btn-sm';
            darkModeToggle.style.marginLeft = '10px';
            darkModeToggle.title = 'Toggle Dark Mode';
            darkModeToggle.addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
                
                // Save preference
                const userData = JSON.parse(localStorage.getItem('userData') || '{}');
                userData.darkMode = document.body.classList.contains('dark-mode');
                localStorage.setItem('userData', JSON.stringify(userData));
            });
            
            document.querySelector('.user-profile').before(darkModeToggle);
            
            // Simulate quiz completion for adaptive learning
            setTimeout(() => {
                // Simulate completing a quiz with a score
                if (window.adaptiveLearning) {
                    window.adaptiveLearning.updatePerformance('Chemical Reactions', 75);
                }
            }, 3000);
            
            // Initialize spaced repetition
            window.spacedRepetition = new SpacedRepetition();
        }
    </script>
</body>
</html>
